"use strict";var e=require("react"),n=require("./privy-provider-ChgF3evV.js"),a=require("@solana/web3.js"),t=require("@privy-io/js-sdk-core"),r=require("./internal-context-GxD_jR-e.js"),o={id:n.SOLANA_FUNDING_PLUGIN_ID,getBalance:({address:e,cluster:n})=>new a.Connection(t.getSolanaRpcEndpointForCluster(n)).getBalance(new a.PublicKey(e)),createTransferTransaction:async({from:e,to:n,amount:r,cluster:o})=>{let s=new a.PublicKey(e),i=new a.Transaction;i.add(a.SystemProgram.transfer({fromPubkey:s,toPubkey:new a.PublicKey(n),lamports:r}));let l=new a.Connection(t.getSolanaRpcEndpointForCluster(o)),c=await l.getLatestBlockhash();return i.recentBlockhash=c.blockhash,i.feePayer=s,{transaction:i,connection:l}},createBridgeTransactionFromRelayQuote:async({quote:e,from:r,cluster:o})=>{let s=e.steps[0]?.items?.[0];if(!s)return;let i=s.data.instructions.map((({keys:e,programId:t,data:r})=>new a.TransactionInstruction({keys:e.map((({pubkey:e,isSigner:n,isWritable:t})=>({pubkey:new a.PublicKey(e),isSigner:n,isWritable:t}))),programId:new a.PublicKey(t),data:n.bufferFrom(r,"hex")}))),l=s.data.addressLookupTableAddresses?.map((e=>new a.PublicKey(e))),c=new a.Connection(t.getSolanaRpcEndpointForCluster(o)),u=await Promise.all((l??[]).map((async e=>c.getAddressLookupTable(e).then((e=>e.value))))),{blockhash:d}=await c.getLatestBlockhash();return{transaction:new a.VersionedTransaction(new a.TransactionMessage({payerKey:new a.PublicKey(r),instructions:i,recentBlockhash:d}).compileToV0Message(u)),connection:c}}};exports.t=o,exports.useFundWallet=a=>{n.usePrivyEventSubscription("fundSolanaWallet",a);let t=n.useAppConfig(),{setModalData:s}=n.usePrivyModal(),{openModal:i}=r.usePrivyInternal();return n.useRegisterPlugin(o),{fundWallet:e.useCallback((async(e,a)=>{s({funding:n.prepareSolanaFundingModalData({address:e,appConfig:t,fundWalletConfig:a,methodScreen:n.FundingMethodSelectionScreen})}),i(n.FundingMethodSelectionScreen)}),[t,s,i])}};

{"version":3,"file":"safe-connector-Bb1voBdF.js","sources":["../../../../node_modules/@safe-global/safe-apps-sdk/dist/esm/version.js","../../../../node_modules/@safe-global/safe-apps-sdk/dist/esm/communication/utils.js","../../../../node_modules/@safe-global/safe-apps-sdk/dist/esm/communication/messageFormatter.js","../../../../node_modules/@safe-global/safe-apps-sdk/dist/esm/communication/methods.js","../../../../node_modules/@safe-global/safe-apps-sdk/dist/esm/communication/index.js","../../../../node_modules/@safe-global/safe-apps-sdk/dist/esm/types/sdk.js","../../../../node_modules/@safe-global/safe-gateway-typescript-sdk/node_modules/cross-fetch/dist/browser-ponyfill.js","../../../../node_modules/@safe-global/safe-gateway-typescript-sdk/dist/utils.js","../../../../node_modules/@safe-global/safe-gateway-typescript-sdk/dist/endpoint.js","../../../../node_modules/@safe-global/safe-gateway-typescript-sdk/dist/config.js","../../../../node_modules/@safe-global/safe-gateway-typescript-sdk/dist/types/safe-info.js","../../../../node_modules/@safe-global/safe-gateway-typescript-sdk/dist/types/safe-apps.js","../../../../node_modules/@safe-global/safe-gateway-typescript-sdk/dist/types/transactions.js","../../../../node_modules/@safe-global/safe-gateway-typescript-sdk/dist/types/chains.js","../../../../node_modules/@safe-global/safe-gateway-typescript-sdk/dist/types/common.js","../../../../node_modules/@safe-global/safe-gateway-typescript-sdk/dist/types/master-copies.js","../../../../node_modules/@safe-global/safe-gateway-typescript-sdk/dist/types/decoded-data.js","../../../../node_modules/@safe-global/safe-gateway-typescript-sdk/dist/types/safe-messages.js","../../../../node_modules/@safe-global/safe-gateway-typescript-sdk/dist/index.js","../../../../node_modules/@safe-global/safe-apps-sdk/dist/esm/txs/index.js","../../../../node_modules/@safe-global/safe-apps-sdk/dist/esm/eth/constants.js","../../../../node_modules/@safe-global/safe-apps-sdk/dist/esm/eth/index.js","../../../../node_modules/@safe-global/safe-apps-sdk/node_modules/abitype/dist/esm/regex.js","../../../../node_modules/@safe-global/safe-apps-sdk/node_modules/abitype/dist/esm/human-readable/formatAbiParameter.js","../../../../node_modules/@safe-global/safe-apps-sdk/node_modules/abitype/dist/esm/human-readable/formatAbiParameters.js","../../../../node_modules/@safe-global/safe-apps-sdk/node_modules/abitype/dist/esm/human-readable/formatAbiItem.js","../../../../node_modules/@safe-global/safe-apps-sdk/node_modules/viem/_esm/utils/abi/formatAbiItem.js","../../../../node_modules/@safe-global/safe-apps-sdk/node_modules/viem/_esm/utils/data/isHex.js","../../../../node_modules/@safe-global/safe-apps-sdk/node_modules/viem/_esm/utils/data/size.js","../../../../node_modules/@safe-global/safe-apps-sdk/node_modules/viem/_esm/errors/version.js","../../../../node_modules/@safe-global/safe-apps-sdk/node_modules/viem/_esm/errors/base.js","../../../../node_modules/@safe-global/safe-apps-sdk/node_modules/viem/_esm/errors/abi.js","../../../../node_modules/@safe-global/safe-apps-sdk/node_modules/viem/_esm/errors/data.js","../../../../node_modules/@safe-global/safe-apps-sdk/node_modules/viem/_esm/utils/data/pad.js","../../../../node_modules/@safe-global/safe-apps-sdk/node_modules/viem/_esm/errors/encoding.js","../../../../node_modules/@safe-global/safe-apps-sdk/node_modules/viem/_esm/utils/encoding/fromHex.js","../../../../node_modules/@safe-global/safe-apps-sdk/node_modules/viem/_esm/utils/encoding/toHex.js","../../../../node_modules/@safe-global/safe-apps-sdk/node_modules/viem/_esm/utils/encoding/toBytes.js","../../../../node_modules/@safe-global/safe-apps-sdk/node_modules/@noble/hashes/esm/_assert.js","../../../../node_modules/@safe-global/safe-apps-sdk/node_modules/@noble/hashes/esm/_u64.js","../../../../node_modules/@safe-global/safe-apps-sdk/node_modules/@noble/hashes/esm/utils.js","../../../../node_modules/@safe-global/safe-apps-sdk/node_modules/@noble/hashes/esm/sha3.js","../../../../node_modules/@safe-global/safe-apps-sdk/node_modules/viem/_esm/utils/hash/keccak256.js","../../../../node_modules/@safe-global/safe-apps-sdk/node_modules/viem/_esm/utils/hash/hashSignature.js","../../../../node_modules/@safe-global/safe-apps-sdk/node_modules/viem/_esm/utils/hash/normalizeSignature.js","../../../../node_modules/@safe-global/safe-apps-sdk/node_modules/viem/_esm/utils/hash/toSignature.js","../../../../node_modules/@safe-global/safe-apps-sdk/node_modules/viem/_esm/utils/hash/toSignatureHash.js","../../../../node_modules/@safe-global/safe-apps-sdk/node_modules/viem/_esm/utils/hash/toEventSelector.js","../../../../node_modules/@safe-global/safe-apps-sdk/node_modules/viem/_esm/errors/address.js","../../../../node_modules/@safe-global/safe-apps-sdk/node_modules/viem/_esm/utils/lru.js","../../../../node_modules/@safe-global/safe-apps-sdk/node_modules/viem/_esm/utils/address/getAddress.js","../../../../node_modules/@safe-global/safe-apps-sdk/node_modules/viem/_esm/utils/address/isAddress.js","../../../../node_modules/@safe-global/safe-apps-sdk/node_modules/viem/_esm/utils/data/concat.js","../../../../node_modules/@safe-global/safe-apps-sdk/node_modules/viem/_esm/utils/data/slice.js","../../../../node_modules/@safe-global/safe-apps-sdk/node_modules/viem/_esm/utils/abi/encodeAbiParameters.js","../../../../node_modules/@safe-global/safe-apps-sdk/node_modules/viem/_esm/utils/hash/toFunctionSelector.js","../../../../node_modules/@safe-global/safe-apps-sdk/node_modules/viem/_esm/utils/abi/getAbiItem.js","../../../../node_modules/@safe-global/safe-apps-sdk/node_modules/viem/_esm/utils/abi/prepareEncodeFunctionData.js","../../../../node_modules/@safe-global/safe-apps-sdk/node_modules/viem/_esm/utils/abi/encodeFunctionData.js","../../../../node_modules/@safe-global/safe-apps-sdk/node_modules/viem/_esm/utils/regex.js","../../../../node_modules/@safe-global/safe-apps-sdk/node_modules/viem/_esm/utils/signature/hashTypedData.js","../../../../node_modules/@safe-global/safe-apps-sdk/node_modules/viem/_esm/utils/typedData.js","../../../../node_modules/@safe-global/safe-apps-sdk/node_modules/viem/_esm/constants/strings.js","../../../../node_modules/@safe-global/safe-apps-sdk/node_modules/viem/_esm/utils/signature/toPrefixedMessage.js","../../../../node_modules/@safe-global/safe-apps-sdk/node_modules/viem/_esm/utils/signature/hashMessage.js","../../../../node_modules/@safe-global/safe-apps-sdk/dist/esm/safe/signatures.js","../../../../node_modules/@safe-global/safe-apps-sdk/dist/esm/types/permissions.js","../../../../node_modules/@safe-global/safe-apps-sdk/dist/esm/wallet/index.js","../../../../node_modules/@safe-global/safe-apps-sdk/dist/esm/decorators/requirePermissions.js","../../../../node_modules/@safe-global/safe-apps-sdk/dist/esm/safe/index.js","../../../../node_modules/@safe-global/safe-apps-sdk/dist/esm/sdk.js","../../../../node_modules/@safe-global/safe-apps-provider/dist/utils.js","../../../../node_modules/@safe-global/safe-apps-provider/dist/provider.js","../../../../node_modules/@safe-global/safe-apps-provider/dist/index.js","../../src/providers/safe/safe-connector.ts"],"sourcesContent":["export const getSDKVersion = () => '9.1.0';\n//# sourceMappingURL=version.js.map","// i.e. 0-255 -> '00'-'ff'\nconst dec2hex = (dec) => dec.toString(16).padStart(2, '0');\nconst generateId = (len) => {\n    const arr = new Uint8Array((len || 40) / 2);\n    window.crypto.getRandomValues(arr);\n    return Array.from(arr, dec2hex).join('');\n};\nconst generateRequestId = () => {\n    if (typeof window !== 'undefined') {\n        return generateId(10);\n    }\n    return new Date().getTime().toString(36);\n};\nexport { generateRequestId };\n//# sourceMappingURL=utils.js.map","import { getSDKVersion } from '../version.js';\nimport { generateRequestId } from './utils.js';\nclass MessageFormatter {\n}\nMessageFormatter.makeRequest = (method, params) => {\n    const id = generateRequestId();\n    return {\n        id,\n        method,\n        params,\n        env: {\n            sdkVersion: getSDKVersion(),\n        },\n    };\n};\nMessageFormatter.makeResponse = (id, data, version) => ({\n    id,\n    success: true,\n    version,\n    data,\n});\nMessageFormatter.makeErrorResponse = (id, error, version) => ({\n    id,\n    success: false,\n    error,\n    version,\n});\nexport { MessageFormatter };\n//# sourceMappingURL=messageFormatter.js.map","export var Methods;\n(function (Methods) {\n    Methods[\"sendTransactions\"] = \"sendTransactions\";\n    Methods[\"rpcCall\"] = \"rpcCall\";\n    Methods[\"getChainInfo\"] = \"getChainInfo\";\n    Methods[\"getSafeInfo\"] = \"getSafeInfo\";\n    Methods[\"getTxBySafeTxHash\"] = \"getTxBySafeTxHash\";\n    Methods[\"getSafeBalances\"] = \"getSafeBalances\";\n    Methods[\"signMessage\"] = \"signMessage\";\n    Methods[\"signTypedMessage\"] = \"signTypedMessage\";\n    Methods[\"getEnvironmentInfo\"] = \"getEnvironmentInfo\";\n    Methods[\"getOffChainSignature\"] = \"getOffChainSignature\";\n    Methods[\"requestAddressBook\"] = \"requestAddressBook\";\n    Methods[\"wallet_getPermissions\"] = \"wallet_getPermissions\";\n    Methods[\"wallet_requestPermissions\"] = \"wallet_requestPermissions\";\n})(Methods || (Methods = {}));\nexport var RestrictedMethods;\n(function (RestrictedMethods) {\n    RestrictedMethods[\"requestAddressBook\"] = \"requestAddressBook\";\n})(RestrictedMethods || (RestrictedMethods = {}));\n//# sourceMappingURL=methods.js.map","import { MessageFormatter } from './messageFormatter.js';\nclass PostMessageCommunicator {\n    constructor(allowedOrigins = null, debugMode = false) {\n        this.allowedOrigins = null;\n        this.callbacks = new Map();\n        this.debugMode = false;\n        this.isServer = typeof window === 'undefined';\n        this.isValidMessage = ({ origin, data, source }) => {\n            const emptyOrMalformed = !data;\n            const sentFromParentEl = !this.isServer && source === window.parent;\n            const majorVersionNumber = typeof data.version !== 'undefined' && parseInt(data.version.split('.')[0]);\n            const allowedSDKVersion = typeof majorVersionNumber === 'number' && majorVersionNumber >= 1;\n            let validOrigin = true;\n            if (Array.isArray(this.allowedOrigins)) {\n                validOrigin = this.allowedOrigins.find((regExp) => regExp.test(origin)) !== undefined;\n            }\n            return !emptyOrMalformed && sentFromParentEl && allowedSDKVersion && validOrigin;\n        };\n        this.logIncomingMessage = (msg) => {\n            console.info(`Safe Apps SDK v1: A message was received from origin ${msg.origin}. `, msg.data);\n        };\n        this.onParentMessage = (msg) => {\n            if (this.isValidMessage(msg)) {\n                this.debugMode && this.logIncomingMessage(msg);\n                this.handleIncomingMessage(msg.data);\n            }\n        };\n        this.handleIncomingMessage = (payload) => {\n            const { id } = payload;\n            const cb = this.callbacks.get(id);\n            if (cb) {\n                cb(payload);\n                this.callbacks.delete(id);\n            }\n        };\n        this.send = (method, params) => {\n            const request = MessageFormatter.makeRequest(method, params);\n            if (this.isServer) {\n                throw new Error(\"Window doesn't exist\");\n            }\n            window.parent.postMessage(request, '*');\n            return new Promise((resolve, reject) => {\n                this.callbacks.set(request.id, (response) => {\n                    if (!response.success) {\n                        reject(new Error(response.error));\n                        return;\n                    }\n                    resolve(response);\n                });\n            });\n        };\n        this.allowedOrigins = allowedOrigins;\n        this.debugMode = debugMode;\n        if (!this.isServer) {\n            window.addEventListener('message', this.onParentMessage);\n        }\n    }\n}\nexport default PostMessageCommunicator;\nexport * from './methods.js';\n//# sourceMappingURL=index.js.map","export const isObjectEIP712TypedData = (obj) => {\n    return typeof obj === 'object' && obj != null && 'domain' in obj && 'types' in obj && 'message' in obj;\n};\n//# sourceMappingURL=sdk.js.map","var global = typeof self !== 'undefined' ? self : this;\nvar __self__ = (function () {\nfunction F() {\nthis.fetch = false;\nthis.DOMException = global.DOMException\n}\nF.prototype = global;\nreturn new F();\n})();\n(function(self) {\n\nvar irrelevant = (function (exports) {\n\n  var support = {\n    searchParams: 'URLSearchParams' in self,\n    iterable: 'Symbol' in self && 'iterator' in Symbol,\n    blob:\n      'FileReader' in self &&\n      'Blob' in self &&\n      (function() {\n        try {\n          new Blob();\n          return true\n        } catch (e) {\n          return false\n        }\n      })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  };\n\n  function isDataView(obj) {\n    return obj && DataView.prototype.isPrototypeOf(obj)\n  }\n\n  if (support.arrayBuffer) {\n    var viewClasses = [\n      '[object Int8Array]',\n      '[object Uint8Array]',\n      '[object Uint8ClampedArray]',\n      '[object Int16Array]',\n      '[object Uint16Array]',\n      '[object Int32Array]',\n      '[object Uint32Array]',\n      '[object Float32Array]',\n      '[object Float64Array]'\n    ];\n\n    var isArrayBufferView =\n      ArrayBuffer.isView ||\n      function(obj) {\n        return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n      };\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name);\n    }\n    if (/[^a-z0-9\\-#$%&'*+.^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value);\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift();\n        return {done: value === undefined, value: value}\n      }\n    };\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      };\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {};\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value);\n      }, this);\n    } else if (Array.isArray(headers)) {\n      headers.forEach(function(header) {\n        this.append(header[0], header[1]);\n      }, this);\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name]);\n      }, this);\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name);\n    value = normalizeValue(value);\n    var oldValue = this.map[name];\n    this.map[name] = oldValue ? oldValue + ', ' + value : value;\n  };\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)];\n  };\n\n  Headers.prototype.get = function(name) {\n    name = normalizeName(name);\n    return this.has(name) ? this.map[name] : null\n  };\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  };\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = normalizeValue(value);\n  };\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    for (var name in this.map) {\n      if (this.map.hasOwnProperty(name)) {\n        callback.call(thisArg, this.map[name], name, this);\n      }\n    }\n  };\n\n  Headers.prototype.keys = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push(name);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.values = function() {\n    var items = [];\n    this.forEach(function(value) {\n      items.push(value);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.entries = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push([name, value]);\n    });\n    return iteratorFor(items)\n  };\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries;\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true;\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result);\n      };\n      reader.onerror = function() {\n        reject(reader.error);\n      };\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsArrayBuffer(blob);\n    return promise\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsText(blob);\n    return promise\n  }\n\n  function readArrayBufferAsText(buf) {\n    var view = new Uint8Array(buf);\n    var chars = new Array(view.length);\n\n    for (var i = 0; i < view.length; i++) {\n      chars[i] = String.fromCharCode(view[i]);\n    }\n    return chars.join('')\n  }\n\n  function bufferClone(buf) {\n    if (buf.slice) {\n      return buf.slice(0)\n    } else {\n      var view = new Uint8Array(buf.byteLength);\n      view.set(new Uint8Array(buf));\n      return view.buffer\n    }\n  }\n\n  function Body() {\n    this.bodyUsed = false;\n\n    this._initBody = function(body) {\n      this._bodyInit = body;\n      if (!body) {\n        this._bodyText = '';\n      } else if (typeof body === 'string') {\n        this._bodyText = body;\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body;\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body;\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString();\n      } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n        this._bodyArrayBuffer = bufferClone(body.buffer);\n        // IE 10-11 can't handle a DataView body.\n        this._bodyInit = new Blob([this._bodyArrayBuffer]);\n      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n        this._bodyArrayBuffer = bufferClone(body);\n      } else {\n        this._bodyText = body = Object.prototype.toString.call(body);\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8');\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type);\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8');\n        }\n      }\n    };\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this);\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyArrayBuffer) {\n          return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      };\n\n      this.arrayBuffer = function() {\n        if (this._bodyArrayBuffer) {\n          return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n        } else {\n          return this.blob().then(readBlobAsArrayBuffer)\n        }\n      };\n    }\n\n    this.text = function() {\n      var rejected = consumed(this);\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return readBlobAsText(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as text')\n      } else {\n        return Promise.resolve(this._bodyText)\n      }\n    };\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      };\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    };\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT'];\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase();\n    return methods.indexOf(upcased) > -1 ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {};\n    var body = options.body;\n\n    if (input instanceof Request) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url;\n      this.credentials = input.credentials;\n      if (!options.headers) {\n        this.headers = new Headers(input.headers);\n      }\n      this.method = input.method;\n      this.mode = input.mode;\n      this.signal = input.signal;\n      if (!body && input._bodyInit != null) {\n        body = input._bodyInit;\n        input.bodyUsed = true;\n      }\n    } else {\n      this.url = String(input);\n    }\n\n    this.credentials = options.credentials || this.credentials || 'same-origin';\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers);\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET');\n    this.mode = options.mode || this.mode || null;\n    this.signal = options.signal || this.signal;\n    this.referrer = null;\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body);\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this, {body: this._bodyInit})\n  };\n\n  function decode(body) {\n    var form = new FormData();\n    body\n      .trim()\n      .split('&')\n      .forEach(function(bytes) {\n        if (bytes) {\n          var split = bytes.split('=');\n          var name = split.shift().replace(/\\+/g, ' ');\n          var value = split.join('=').replace(/\\+/g, ' ');\n          form.append(decodeURIComponent(name), decodeURIComponent(value));\n        }\n      });\n    return form\n  }\n\n  function parseHeaders(rawHeaders) {\n    var headers = new Headers();\n    // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n    // https://tools.ietf.org/html/rfc7230#section-3.2\n    var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ');\n    preProcessedHeaders.split(/\\r?\\n/).forEach(function(line) {\n      var parts = line.split(':');\n      var key = parts.shift().trim();\n      if (key) {\n        var value = parts.join(':').trim();\n        headers.append(key, value);\n      }\n    });\n    return headers\n  }\n\n  Body.call(Request.prototype);\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {};\n    }\n\n    this.type = 'default';\n    this.status = options.status === undefined ? 200 : options.status;\n    this.ok = this.status >= 200 && this.status < 300;\n    this.statusText = 'statusText' in options ? options.statusText : 'OK';\n    this.headers = new Headers(options.headers);\n    this.url = options.url || '';\n    this._initBody(bodyInit);\n  }\n\n  Body.call(Response.prototype);\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  };\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''});\n    response.type = 'error';\n    return response\n  };\n\n  var redirectStatuses = [301, 302, 303, 307, 308];\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  };\n\n  exports.DOMException = self.DOMException;\n  try {\n    new exports.DOMException();\n  } catch (err) {\n    exports.DOMException = function(message, name) {\n      this.message = message;\n      this.name = name;\n      var error = Error(message);\n      this.stack = error.stack;\n    };\n    exports.DOMException.prototype = Object.create(Error.prototype);\n    exports.DOMException.prototype.constructor = exports.DOMException;\n  }\n\n  function fetch(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request = new Request(input, init);\n\n      if (request.signal && request.signal.aborted) {\n        return reject(new exports.DOMException('Aborted', 'AbortError'))\n      }\n\n      var xhr = new XMLHttpRequest();\n\n      function abortXhr() {\n        xhr.abort();\n      }\n\n      xhr.onload = function() {\n        var options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n        };\n        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL');\n        var body = 'response' in xhr ? xhr.response : xhr.responseText;\n        resolve(new Response(body, options));\n      };\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.ontimeout = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.onabort = function() {\n        reject(new exports.DOMException('Aborted', 'AbortError'));\n      };\n\n      xhr.open(request.method, request.url, true);\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true;\n      } else if (request.credentials === 'omit') {\n        xhr.withCredentials = false;\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob';\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value);\n      });\n\n      if (request.signal) {\n        request.signal.addEventListener('abort', abortXhr);\n\n        xhr.onreadystatechange = function() {\n          // DONE (success or failure)\n          if (xhr.readyState === 4) {\n            request.signal.removeEventListener('abort', abortXhr);\n          }\n        };\n      }\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit);\n    })\n  }\n\n  fetch.polyfill = true;\n\n  if (!self.fetch) {\n    self.fetch = fetch;\n    self.Headers = Headers;\n    self.Request = Request;\n    self.Response = Response;\n  }\n\n  exports.Headers = Headers;\n  exports.Request = Request;\n  exports.Response = Response;\n  exports.fetch = fetch;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n  return exports;\n\n})({});\n})(__self__);\n__self__.fetch.ponyfill = true;\n// Remove \"polyfill\" property added by whatwg-fetch\ndelete __self__.fetch.polyfill;\n// Choose between native implementation (global) or custom implementation (__self__)\n// var ctx = global.fetch ? global : __self__;\nvar ctx = __self__; // this line disable service worker support temporarily\nexports = ctx.fetch // To enable: import fetch from 'cross-fetch'\nexports.default = ctx.fetch // For TypeScript consumers without esModuleInterop.\nexports.fetch = ctx.fetch // To enable: import {fetch} from 'cross-fetch'\nexports.Headers = ctx.Headers\nexports.Request = ctx.Request\nexports.Response = ctx.Response\nmodule.exports = exports\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.fetchData = exports.stringifyQuery = exports.insertParams = void 0;\nconst cross_fetch_1 = __importDefault(require(\"cross-fetch\"));\nconst isErrorResponse = (data) => {\n    const isObject = typeof data === 'object' && data !== null;\n    return isObject && 'code' in data && 'message' in data;\n};\nfunction replaceParam(str, key, value) {\n    return str.replace(new RegExp(`\\\\{${key}\\\\}`, 'g'), value);\n}\nfunction insertParams(template, params) {\n    return params\n        ? Object.keys(params).reduce((result, key) => {\n            return replaceParam(result, key, String(params[key]));\n        }, template)\n        : template;\n}\nexports.insertParams = insertParams;\nfunction stringifyQuery(query) {\n    if (!query) {\n        return '';\n    }\n    const searchParams = new URLSearchParams();\n    Object.keys(query).forEach((key) => {\n        if (query[key] != null) {\n            searchParams.append(key, String(query[key]));\n        }\n    });\n    const searchString = searchParams.toString();\n    return searchString ? `?${searchString}` : '';\n}\nexports.stringifyQuery = stringifyQuery;\nfunction fetchData(url, body) {\n    return __awaiter(this, void 0, void 0, function* () {\n        let options;\n        if (body != null) {\n            options = {\n                method: 'POST',\n                body: typeof body === 'string' ? body : JSON.stringify(body),\n                headers: { 'Content-Type': 'application/json' },\n            };\n        }\n        const resp = yield (0, cross_fetch_1.default)(url, options);\n        let json;\n        try {\n            json = yield resp.json();\n        }\n        catch (_a) {\n            if (resp.headers && resp.headers.get('content-length') !== '0') {\n                throw new Error(`Invalid response content: ${resp.statusText}`);\n            }\n        }\n        if (!resp.ok) {\n            const errTxt = isErrorResponse(json) ? `${json.code}: ${json.message}` : resp.statusText;\n            throw new Error(errTxt);\n        }\n        return json;\n    });\n}\nexports.fetchData = fetchData;\n//# sourceMappingURL=utils.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getEndpoint = exports.postEndpoint = void 0;\nconst utils_1 = require(\"./utils\");\nfunction makeUrl(baseUrl, path, pathParams, query) {\n    const pathname = (0, utils_1.insertParams)(path, pathParams);\n    const search = (0, utils_1.stringifyQuery)(query);\n    return `${baseUrl}${pathname}${search}`;\n}\nfunction postEndpoint(baseUrl, path, params) {\n    const url = makeUrl(baseUrl, path, params === null || params === void 0 ? void 0 : params.path, params === null || params === void 0 ? void 0 : params.query);\n    return (0, utils_1.fetchData)(url, params === null || params === void 0 ? void 0 : params.body);\n}\nexports.postEndpoint = postEndpoint;\nfunction getEndpoint(baseUrl, path, params, rawUrl) {\n    if (rawUrl) {\n        return (0, utils_1.fetchData)(rawUrl);\n    }\n    const url = makeUrl(baseUrl, path, params === null || params === void 0 ? void 0 : params.path, params === null || params === void 0 ? void 0 : params.query);\n    return (0, utils_1.fetchData)(url);\n}\nexports.getEndpoint = getEndpoint;\n//# sourceMappingURL=endpoint.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DEFAULT_BASE_URL = void 0;\nexports.DEFAULT_BASE_URL = 'https://safe-client.safe.global';\n//# sourceMappingURL=config.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ImplementationVersionState = void 0;\nvar ImplementationVersionState;\n(function (ImplementationVersionState) {\n    ImplementationVersionState[\"UP_TO_DATE\"] = \"UP_TO_DATE\";\n    ImplementationVersionState[\"OUTDATED\"] = \"OUTDATED\";\n    ImplementationVersionState[\"UNKNOWN\"] = \"UNKNOWN\";\n})(ImplementationVersionState = exports.ImplementationVersionState || (exports.ImplementationVersionState = {}));\n//# sourceMappingURL=safe-info.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SafeAppSocialPlatforms = exports.SafeAppFeatures = exports.SafeAppAccessPolicyTypes = void 0;\nvar SafeAppAccessPolicyTypes;\n(function (SafeAppAccessPolicyTypes) {\n    SafeAppAccessPolicyTypes[\"NoRestrictions\"] = \"NO_RESTRICTIONS\";\n    SafeAppAccessPolicyTypes[\"DomainAllowlist\"] = \"DOMAIN_ALLOWLIST\";\n})(SafeAppAccessPolicyTypes = exports.SafeAppAccessPolicyTypes || (exports.SafeAppAccessPolicyTypes = {}));\nvar SafeAppFeatures;\n(function (SafeAppFeatures) {\n    SafeAppFeatures[\"BATCHED_TRANSACTIONS\"] = \"BATCHED_TRANSACTIONS\";\n})(SafeAppFeatures = exports.SafeAppFeatures || (exports.SafeAppFeatures = {}));\nvar SafeAppSocialPlatforms;\n(function (SafeAppSocialPlatforms) {\n    SafeAppSocialPlatforms[\"TWITTER\"] = \"TWITTER\";\n    SafeAppSocialPlatforms[\"GITHUB\"] = \"GITHUB\";\n    SafeAppSocialPlatforms[\"DISCORD\"] = \"DISCORD\";\n})(SafeAppSocialPlatforms = exports.SafeAppSocialPlatforms || (exports.SafeAppSocialPlatforms = {}));\n//# sourceMappingURL=safe-apps.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LabelValue = exports.DetailedExecutionInfoType = exports.TransactionListItemType = exports.ConflictType = exports.TransactionInfoType = exports.SettingsInfoType = exports.TransactionTokenType = exports.TransferDirection = exports.TransactionStatus = exports.Operation = void 0;\nvar Operation;\n(function (Operation) {\n    Operation[Operation[\"CALL\"] = 0] = \"CALL\";\n    Operation[Operation[\"DELEGATE\"] = 1] = \"DELEGATE\";\n})(Operation = exports.Operation || (exports.Operation = {}));\nvar TransactionStatus;\n(function (TransactionStatus) {\n    TransactionStatus[\"AWAITING_CONFIRMATIONS\"] = \"AWAITING_CONFIRMATIONS\";\n    TransactionStatus[\"AWAITING_EXECUTION\"] = \"AWAITING_EXECUTION\";\n    TransactionStatus[\"CANCELLED\"] = \"CANCELLED\";\n    TransactionStatus[\"FAILED\"] = \"FAILED\";\n    TransactionStatus[\"SUCCESS\"] = \"SUCCESS\";\n})(TransactionStatus = exports.TransactionStatus || (exports.TransactionStatus = {}));\nvar TransferDirection;\n(function (TransferDirection) {\n    TransferDirection[\"INCOMING\"] = \"INCOMING\";\n    TransferDirection[\"OUTGOING\"] = \"OUTGOING\";\n    TransferDirection[\"UNKNOWN\"] = \"UNKNOWN\";\n})(TransferDirection = exports.TransferDirection || (exports.TransferDirection = {}));\n// https://safe.global/safe-client-gateway/docs/routes/transactions/models/enum.TransferInfo.html\nvar TransactionTokenType;\n(function (TransactionTokenType) {\n    TransactionTokenType[\"ERC20\"] = \"ERC20\";\n    TransactionTokenType[\"ERC721\"] = \"ERC721\";\n    TransactionTokenType[\"NATIVE_COIN\"] = \"NATIVE_COIN\";\n})(TransactionTokenType = exports.TransactionTokenType || (exports.TransactionTokenType = {}));\nvar SettingsInfoType;\n(function (SettingsInfoType) {\n    SettingsInfoType[\"SET_FALLBACK_HANDLER\"] = \"SET_FALLBACK_HANDLER\";\n    SettingsInfoType[\"ADD_OWNER\"] = \"ADD_OWNER\";\n    SettingsInfoType[\"REMOVE_OWNER\"] = \"REMOVE_OWNER\";\n    SettingsInfoType[\"SWAP_OWNER\"] = \"SWAP_OWNER\";\n    SettingsInfoType[\"CHANGE_THRESHOLD\"] = \"CHANGE_THRESHOLD\";\n    SettingsInfoType[\"CHANGE_IMPLEMENTATION\"] = \"CHANGE_IMPLEMENTATION\";\n    SettingsInfoType[\"ENABLE_MODULE\"] = \"ENABLE_MODULE\";\n    SettingsInfoType[\"DISABLE_MODULE\"] = \"DISABLE_MODULE\";\n    SettingsInfoType[\"SET_GUARD\"] = \"SET_GUARD\";\n    SettingsInfoType[\"DELETE_GUARD\"] = \"DELETE_GUARD\";\n})(SettingsInfoType = exports.SettingsInfoType || (exports.SettingsInfoType = {}));\n// https://safe.global/safe-client-gateway/docs/routes/transactions/models/enum.TransactionInfo.html\nvar TransactionInfoType;\n(function (TransactionInfoType) {\n    TransactionInfoType[\"TRANSFER\"] = \"Transfer\";\n    TransactionInfoType[\"SETTINGS_CHANGE\"] = \"SettingsChange\";\n    TransactionInfoType[\"CUSTOM\"] = \"Custom\";\n    TransactionInfoType[\"CREATION\"] = \"Creation\";\n})(TransactionInfoType = exports.TransactionInfoType || (exports.TransactionInfoType = {}));\n// https://safe.global/safe-client-gateway/docs/routes/transactions/models/summary/enum.ConflictType.html\nvar ConflictType;\n(function (ConflictType) {\n    ConflictType[\"NONE\"] = \"None\";\n    ConflictType[\"HAS_NEXT\"] = \"HasNext\";\n    ConflictType[\"END\"] = \"End\";\n})(ConflictType = exports.ConflictType || (exports.ConflictType = {}));\n// https://safe.global/safe-client-gateway/docs/routes/transactions/models/summary/enum.TransactionListItem.html\nvar TransactionListItemType;\n(function (TransactionListItemType) {\n    TransactionListItemType[\"TRANSACTION\"] = \"TRANSACTION\";\n    TransactionListItemType[\"LABEL\"] = \"LABEL\";\n    TransactionListItemType[\"CONFLICT_HEADER\"] = \"CONFLICT_HEADER\";\n    TransactionListItemType[\"DATE_LABEL\"] = \"DATE_LABEL\";\n})(TransactionListItemType = exports.TransactionListItemType || (exports.TransactionListItemType = {}));\n// https://safe.global/safe-client-gateway/docs/routes/transactions/models/details/enum.DetailedExecutionInfo.html\nvar DetailedExecutionInfoType;\n(function (DetailedExecutionInfoType) {\n    DetailedExecutionInfoType[\"MULTISIG\"] = \"MULTISIG\";\n    DetailedExecutionInfoType[\"MODULE\"] = \"MODULE\";\n})(DetailedExecutionInfoType = exports.DetailedExecutionInfoType || (exports.DetailedExecutionInfoType = {}));\n/**\n * @see https://gnosis.github.io/safe-client-gateway/docs/routes/transactions/models/summary/enum.Label.html\n */\nvar LabelValue;\n(function (LabelValue) {\n    LabelValue[\"Queued\"] = \"Queued\";\n    LabelValue[\"Next\"] = \"Next\";\n})(LabelValue = exports.LabelValue || (exports.LabelValue = {}));\n//# sourceMappingURL=transactions.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FEATURES = exports.GAS_PRICE_TYPE = exports.RPC_AUTHENTICATION = void 0;\nvar RPC_AUTHENTICATION;\n(function (RPC_AUTHENTICATION) {\n    RPC_AUTHENTICATION[\"API_KEY_PATH\"] = \"API_KEY_PATH\";\n    RPC_AUTHENTICATION[\"NO_AUTHENTICATION\"] = \"NO_AUTHENTICATION\";\n    RPC_AUTHENTICATION[\"UNKNOWN\"] = \"UNKNOWN\";\n})(RPC_AUTHENTICATION = exports.RPC_AUTHENTICATION || (exports.RPC_AUTHENTICATION = {}));\nvar GAS_PRICE_TYPE;\n(function (GAS_PRICE_TYPE) {\n    GAS_PRICE_TYPE[\"ORACLE\"] = \"ORACLE\";\n    GAS_PRICE_TYPE[\"FIXED\"] = \"FIXED\";\n    GAS_PRICE_TYPE[\"UNKNOWN\"] = \"UNKNOWN\";\n})(GAS_PRICE_TYPE = exports.GAS_PRICE_TYPE || (exports.GAS_PRICE_TYPE = {}));\nvar FEATURES;\n(function (FEATURES) {\n    FEATURES[\"ERC721\"] = \"ERC721\";\n    FEATURES[\"SAFE_APPS\"] = \"SAFE_APPS\";\n    FEATURES[\"CONTRACT_INTERACTION\"] = \"CONTRACT_INTERACTION\";\n    FEATURES[\"DOMAIN_LOOKUP\"] = \"DOMAIN_LOOKUP\";\n    FEATURES[\"SPENDING_LIMIT\"] = \"SPENDING_LIMIT\";\n    FEATURES[\"EIP1559\"] = \"EIP1559\";\n    FEATURES[\"SAFE_TX_GAS_OPTIONAL\"] = \"SAFE_TX_GAS_OPTIONAL\";\n    FEATURES[\"TX_SIMULATION\"] = \"TX_SIMULATION\";\n    FEATURES[\"EIP1271\"] = \"EIP1271\";\n})(FEATURES = exports.FEATURES || (exports.FEATURES = {}));\n//# sourceMappingURL=chains.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TokenType = void 0;\nvar TokenType;\n(function (TokenType) {\n    TokenType[\"ERC20\"] = \"ERC20\";\n    TokenType[\"ERC721\"] = \"ERC721\";\n    TokenType[\"NATIVE_TOKEN\"] = \"NATIVE_TOKEN\";\n})(TokenType = exports.TokenType || (exports.TokenType = {}));\n//# sourceMappingURL=common.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=master-copies.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=decoded-data.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SafeMessageStatus = exports.SafeMessageListItemType = void 0;\nvar SafeMessageListItemType;\n(function (SafeMessageListItemType) {\n    SafeMessageListItemType[\"DATE_LABEL\"] = \"DATE_LABEL\";\n    SafeMessageListItemType[\"MESSAGE\"] = \"MESSAGE\";\n})(SafeMessageListItemType = exports.SafeMessageListItemType || (exports.SafeMessageListItemType = {}));\nvar SafeMessageStatus;\n(function (SafeMessageStatus) {\n    SafeMessageStatus[\"NEEDS_CONFIRMATION\"] = \"NEEDS_CONFIRMATION\";\n    SafeMessageStatus[\"CONFIRMED\"] = \"CONFIRMED\";\n})(SafeMessageStatus = exports.SafeMessageStatus || (exports.SafeMessageStatus = {}));\n//# sourceMappingURL=safe-messages.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.confirmSafeMessage = exports.proposeSafeMessage = exports.getSafeMessage = exports.getSafeMessages = exports.getDecodedData = exports.getMasterCopies = exports.getSafeApps = exports.getChainConfig = exports.getChainsConfig = exports.proposeTransaction = exports.postSafeGasEstimation = exports.getTransactionDetails = exports.getTransactionQueue = exports.getTransactionHistory = exports.getCollectiblesPage = exports.getCollectibles = exports.getOwnedSafes = exports.getFiatCurrencies = exports.getBalances = exports.getMultisigTransactions = exports.getModuleTransactions = exports.getIncomingTransfers = exports.getSafeInfo = exports.setBaseUrl = void 0;\nconst endpoint_1 = require(\"./endpoint\");\nconst config_1 = require(\"./config\");\n__exportStar(require(\"./types/safe-info\"), exports);\n__exportStar(require(\"./types/safe-apps\"), exports);\n__exportStar(require(\"./types/transactions\"), exports);\n__exportStar(require(\"./types/chains\"), exports);\n__exportStar(require(\"./types/common\"), exports);\n__exportStar(require(\"./types/master-copies\"), exports);\n__exportStar(require(\"./types/decoded-data\"), exports);\n__exportStar(require(\"./types/safe-messages\"), exports);\n// Can be set externally to a different CGW host\nlet baseUrl = config_1.DEFAULT_BASE_URL;\n/**\n * Set the base CGW URL\n */\nconst setBaseUrl = (url) => {\n    baseUrl = url;\n};\nexports.setBaseUrl = setBaseUrl;\n/* eslint-disable @typescript-eslint/explicit-module-boundary-types */\n/**\n * Get basic information about a Safe. E.g. owners, modules, version etc\n */\nfunction getSafeInfo(chainId, address) {\n    return (0, endpoint_1.getEndpoint)(baseUrl, '/v1/chains/{chainId}/safes/{address}', { path: { chainId, address } });\n}\nexports.getSafeInfo = getSafeInfo;\n/**\n * Get filterable list of incoming transactions\n */\nfunction getIncomingTransfers(chainId, address, query, pageUrl) {\n    return (0, endpoint_1.getEndpoint)(baseUrl, '/v1/chains/{chainId}/safes/{address}/incoming-transfers/', {\n        path: { chainId, address },\n        query,\n    }, pageUrl);\n}\nexports.getIncomingTransfers = getIncomingTransfers;\n/**\n * Get filterable list of module transactions\n */\nfunction getModuleTransactions(chainId, address, query, pageUrl) {\n    return (0, endpoint_1.getEndpoint)(baseUrl, '/v1/chains/{chainId}/safes/{address}/module-transactions/', {\n        path: { chainId, address },\n        query,\n    }, pageUrl);\n}\nexports.getModuleTransactions = getModuleTransactions;\n/**\n * Get filterable list of multisig transactions\n */\nfunction getMultisigTransactions(chainId, address, query, pageUrl) {\n    return (0, endpoint_1.getEndpoint)(baseUrl, '/v1/chains/{chainId}/safes/{address}/multisig-transactions/', {\n        path: { chainId, address },\n        query,\n    }, pageUrl);\n}\nexports.getMultisigTransactions = getMultisigTransactions;\n/**\n * Get the total balance and all assets stored in a Safe\n */\nfunction getBalances(chainId, address, currency = 'usd', query = {}) {\n    return (0, endpoint_1.getEndpoint)(baseUrl, '/v1/chains/{chainId}/safes/{address}/balances/{currency}', {\n        path: { chainId, address, currency },\n        query,\n    });\n}\nexports.getBalances = getBalances;\n/**\n * Get a list of supported fiat currencies (e.g. USD, EUR etc)\n */\nfunction getFiatCurrencies() {\n    return (0, endpoint_1.getEndpoint)(baseUrl, '/v1/balances/supported-fiat-codes');\n}\nexports.getFiatCurrencies = getFiatCurrencies;\n/**\n * Get the addresses of all Safes belonging to an owner\n */\nfunction getOwnedSafes(chainId, address) {\n    return (0, endpoint_1.getEndpoint)(baseUrl, '/v1/chains/{chainId}/owners/{address}/safes', { path: { chainId, address } });\n}\nexports.getOwnedSafes = getOwnedSafes;\n/**\n * Get NFTs stored in a Safe\n */\nfunction getCollectibles(chainId, address, query = {}) {\n    return (0, endpoint_1.getEndpoint)(baseUrl, '/v1/chains/{chainId}/safes/{address}/collectibles', {\n        path: { chainId, address },\n        query,\n    });\n}\nexports.getCollectibles = getCollectibles;\n/**\n * Get NFTs stored in a Safe\n */\nfunction getCollectiblesPage(chainId, address, query = {}, pageUrl) {\n    return (0, endpoint_1.getEndpoint)(baseUrl, '/v2/chains/{chainId}/safes/{address}/collectibles', { path: { chainId, address }, query }, pageUrl);\n}\nexports.getCollectiblesPage = getCollectiblesPage;\n/**\n * Get a list of past Safe transactions\n */\nfunction getTransactionHistory(chainId, address, pageUrl) {\n    return (0, endpoint_1.getEndpoint)(baseUrl, '/v1/chains/{chainId}/safes/{safe_address}/transactions/history', { path: { chainId, safe_address: address }, query: {} }, pageUrl);\n}\nexports.getTransactionHistory = getTransactionHistory;\n/**\n * Get the list of pending transactions\n */\nfunction getTransactionQueue(chainId, address, pageUrl, trusted) {\n    return (0, endpoint_1.getEndpoint)(baseUrl, '/v1/chains/{chainId}/safes/{safe_address}/transactions/queued', { path: { chainId, safe_address: address }, query: { trusted } }, pageUrl);\n}\nexports.getTransactionQueue = getTransactionQueue;\n/**\n * Get the details of an individual transaction by its id\n */\nfunction getTransactionDetails(chainId, transactionId) {\n    return (0, endpoint_1.getEndpoint)(baseUrl, '/v1/chains/{chainId}/transactions/{transactionId}', {\n        path: { chainId, transactionId },\n    });\n}\nexports.getTransactionDetails = getTransactionDetails;\n/**\n * Request a gas estimate & recommmended tx nonce for a created transaction\n */\nfunction postSafeGasEstimation(chainId, address, body) {\n    return (0, endpoint_1.postEndpoint)(baseUrl, '/v2/chains/{chainId}/safes/{safe_address}/multisig-transactions/estimations', {\n        path: { chainId, safe_address: address },\n        body,\n    });\n}\nexports.postSafeGasEstimation = postSafeGasEstimation;\n/**\n * Propose a new transaction for other owners to sign/execute\n */\nfunction proposeTransaction(chainId, address, body) {\n    return (0, endpoint_1.postEndpoint)(baseUrl, '/v1/chains/{chainId}/transactions/{safe_address}/propose', {\n        path: { chainId, safe_address: address },\n        body,\n    });\n}\nexports.proposeTransaction = proposeTransaction;\n/**\n * Returns all defined chain configs\n */\nfunction getChainsConfig(query) {\n    return (0, endpoint_1.getEndpoint)(baseUrl, '/v1/chains', {\n        query,\n    });\n}\nexports.getChainsConfig = getChainsConfig;\n/**\n * Returns a chain config\n */\nfunction getChainConfig(chainId) {\n    return (0, endpoint_1.getEndpoint)(baseUrl, '/v1/chains/{chainId}', {\n        path: { chainId: chainId },\n    });\n}\nexports.getChainConfig = getChainConfig;\n/**\n * Returns Safe Apps List\n */\nfunction getSafeApps(chainId, query = {}) {\n    return (0, endpoint_1.getEndpoint)(baseUrl, '/v1/chains/{chainId}/safe-apps', {\n        path: { chainId: chainId },\n        query,\n    });\n}\nexports.getSafeApps = getSafeApps;\n/**\n * Returns list of Master Copies\n */\nfunction getMasterCopies(chainId) {\n    return (0, endpoint_1.getEndpoint)(baseUrl, '/v1/chains/{chainId}/about/master-copies', {\n        path: { chainId: chainId },\n    });\n}\nexports.getMasterCopies = getMasterCopies;\n/**\n * Returns decoded data\n */\nfunction getDecodedData(chainId, encodedData) {\n    return (0, endpoint_1.postEndpoint)(baseUrl, '/v1/chains/{chainId}/data-decoder', {\n        path: { chainId: chainId },\n        body: { data: encodedData },\n    });\n}\nexports.getDecodedData = getDecodedData;\n/**\n * Returns list of `SafeMessage`s\n */\nfunction getSafeMessages(chainId, address, pageUrl) {\n    return (0, endpoint_1.getEndpoint)(baseUrl, '/v1/chains/{chainId}/safes/{safe_address}/messages', { path: { chainId, safe_address: address }, query: {} }, pageUrl);\n}\nexports.getSafeMessages = getSafeMessages;\n/**\n * Returns a `SafeMessage`\n */\nfunction getSafeMessage(chainId, messageHash) {\n    return (0, endpoint_1.getEndpoint)(baseUrl, '/v1/chains/{chainId}/messages/{message_hash}', {\n        path: { chainId, message_hash: messageHash },\n    });\n}\nexports.getSafeMessage = getSafeMessage;\n/**\n * Propose a new `SafeMessage` for other owners to sign\n */\nfunction proposeSafeMessage(chainId, address, body) {\n    return (0, endpoint_1.postEndpoint)(baseUrl, '/v1/chains/{chainId}/safes/{safe_address}/messages', {\n        path: { chainId, safe_address: address },\n        body,\n    });\n}\nexports.proposeSafeMessage = proposeSafeMessage;\n/**\n * Add a confirmation to a `SafeMessage`\n */\nfunction confirmSafeMessage(chainId, messageHash, body) {\n    return (0, endpoint_1.postEndpoint)(baseUrl, '/v1/chains/{chainId}/messages/{message_hash}/signatures', {\n        path: { chainId, message_hash: messageHash },\n        body,\n    });\n}\nexports.confirmSafeMessage = confirmSafeMessage;\n/* eslint-enable @typescript-eslint/explicit-module-boundary-types */\n//# sourceMappingURL=index.js.map","import { Methods } from '../communication/methods.js';\nimport { isObjectEIP712TypedData, } from '../types/index.js';\nclass TXs {\n    constructor(communicator) {\n        this.communicator = communicator;\n    }\n    async getBySafeTxHash(safeTxHash) {\n        if (!safeTxHash) {\n            throw new Error('Invalid safeTxHash');\n        }\n        const response = await this.communicator.send(Methods.getTxBySafeTxHash, { safeTxHash });\n        return response.data;\n    }\n    async signMessage(message) {\n        const messagePayload = {\n            message,\n        };\n        const response = await this.communicator.send(Methods.signMessage, messagePayload);\n        return response.data;\n    }\n    async signTypedMessage(typedData) {\n        if (!isObjectEIP712TypedData(typedData)) {\n            throw new Error('Invalid typed data');\n        }\n        const response = await this.communicator.send(Methods.signTypedMessage, { typedData });\n        return response.data;\n    }\n    async send({ txs, params }) {\n        if (!txs || !txs.length) {\n            throw new Error('No transactions were passed');\n        }\n        const messagePayload = {\n            txs,\n            params,\n        };\n        const response = await this.communicator.send(Methods.sendTransactions, messagePayload);\n        return response.data;\n    }\n}\nexport { TXs };\n//# sourceMappingURL=index.js.map","export const RPC_CALLS = {\n    eth_call: 'eth_call',\n    eth_gasPrice: 'eth_gasPrice',\n    eth_getLogs: 'eth_getLogs',\n    eth_getBalance: 'eth_getBalance',\n    eth_getCode: 'eth_getCode',\n    eth_getBlockByHash: 'eth_getBlockByHash',\n    eth_getBlockByNumber: 'eth_getBlockByNumber',\n    eth_getStorageAt: 'eth_getStorageAt',\n    eth_getTransactionByHash: 'eth_getTransactionByHash',\n    eth_getTransactionReceipt: 'eth_getTransactionReceipt',\n    eth_getTransactionCount: 'eth_getTransactionCount',\n    eth_estimateGas: 'eth_estimateGas',\n    safe_setSettings: 'safe_setSettings',\n};\n//# sourceMappingURL=constants.js.map","import { RPC_CALLS } from '../eth/constants.js';\nimport { Methods } from '../communication/methods.js';\nconst inputFormatters = {\n    defaultBlockParam: (arg = 'latest') => arg,\n    returnFullTxObjectParam: (arg = false) => arg,\n    blockNumberToHex: (arg) => Number.isInteger(arg) ? `0x${arg.toString(16)}` : arg,\n};\nclass Eth {\n    constructor(communicator) {\n        this.communicator = communicator;\n        this.call = this.buildRequest({\n            call: RPC_CALLS.eth_call,\n            formatters: [null, inputFormatters.defaultBlockParam],\n        });\n        this.getBalance = this.buildRequest({\n            call: RPC_CALLS.eth_getBalance,\n            formatters: [null, inputFormatters.defaultBlockParam],\n        });\n        this.getCode = this.buildRequest({\n            call: RPC_CALLS.eth_getCode,\n            formatters: [null, inputFormatters.defaultBlockParam],\n        });\n        this.getStorageAt = this.buildRequest({\n            call: RPC_CALLS.eth_getStorageAt,\n            formatters: [null, inputFormatters.blockNumberToHex, inputFormatters.defaultBlockParam],\n        });\n        this.getPastLogs = this.buildRequest({\n            call: RPC_CALLS.eth_getLogs,\n        });\n        this.getBlockByHash = this.buildRequest({\n            call: RPC_CALLS.eth_getBlockByHash,\n            formatters: [null, inputFormatters.returnFullTxObjectParam],\n        });\n        this.getBlockByNumber = this.buildRequest({\n            call: RPC_CALLS.eth_getBlockByNumber,\n            formatters: [inputFormatters.blockNumberToHex, inputFormatters.returnFullTxObjectParam],\n        });\n        this.getTransactionByHash = this.buildRequest({\n            call: RPC_CALLS.eth_getTransactionByHash,\n        });\n        this.getTransactionReceipt = this.buildRequest({\n            call: RPC_CALLS.eth_getTransactionReceipt,\n        });\n        this.getTransactionCount = this.buildRequest({\n            call: RPC_CALLS.eth_getTransactionCount,\n            formatters: [null, inputFormatters.defaultBlockParam],\n        });\n        this.getGasPrice = this.buildRequest({\n            call: RPC_CALLS.eth_gasPrice,\n        });\n        this.getEstimateGas = (transaction) => this.buildRequest({\n            call: RPC_CALLS.eth_estimateGas,\n        })([transaction]);\n        this.setSafeSettings = this.buildRequest({\n            call: RPC_CALLS.safe_setSettings,\n        });\n    }\n    buildRequest(args) {\n        const { call, formatters } = args;\n        return async (params) => {\n            if (formatters && Array.isArray(params)) {\n                formatters.forEach((formatter, i) => {\n                    if (formatter) {\n                        params[i] = formatter(params[i]);\n                    }\n                });\n            }\n            const payload = {\n                call,\n                params: params || [],\n            };\n            const response = await this.communicator.send(Methods.rpcCall, payload);\n            return response.data;\n        };\n    }\n}\nexport { Eth };\n//# sourceMappingURL=index.js.map","// TODO: This looks cool. Need to check the performance of `new RegExp` versus defined inline though.\n// https://twitter.com/GabrielVergnaud/status/1622906834343366657\nexport function execTyped(regex, string) {\n    const match = regex.exec(string);\n    return match?.groups;\n}\n// `bytes<M>`: binary type of `M` bytes, `0 < M <= 32`\n// https://regexr.com/6va55\nexport const bytesRegex = /^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/;\n// `(u)int<M>`: (un)signed integer type of `M` bits, `0 < M <= 256`, `M % 8 == 0`\n// https://regexr.com/6v8hp\nexport const integerRegex = /^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;\nexport const isTupleRegex = /^\\(.+?\\).*?$/;\n//# sourceMappingURL=regex.js.map","import { execTyped } from '../regex.js';\n// https://regexr.com/7f7rv\nconst tupleRegex = /^tuple(?<array>(\\[(\\d*)\\])*)$/;\n/**\n * Formats {@link AbiParameter} to human-readable ABI parameter.\n *\n * @param abiParameter - ABI parameter\n * @returns Human-readable ABI parameter\n *\n * @example\n * const result = formatAbiParameter({ type: 'address', name: 'from' })\n * //    ^? const result: 'address from'\n */\nexport function formatAbiParameter(abiParameter) {\n    let type = abiParameter.type;\n    if (tupleRegex.test(abiParameter.type) && 'components' in abiParameter) {\n        type = '(';\n        const length = abiParameter.components.length;\n        for (let i = 0; i < length; i++) {\n            const component = abiParameter.components[i];\n            type += formatAbiParameter(component);\n            if (i < length - 1)\n                type += ', ';\n        }\n        const result = execTyped(tupleRegex, abiParameter.type);\n        type += `)${result?.array ?? ''}`;\n        return formatAbiParameter({\n            ...abiParameter,\n            type,\n        });\n    }\n    // Add `indexed` to type if in `abiParameter`\n    if ('indexed' in abiParameter && abiParameter.indexed)\n        type = `${type} indexed`;\n    // Return human-readable ABI parameter\n    if (abiParameter.name)\n        return `${type} ${abiParameter.name}`;\n    return type;\n}\n//# sourceMappingURL=formatAbiParameter.js.map","import { formatAbiParameter, } from './formatAbiParameter.js';\n/**\n * Formats {@link AbiParameter}s to human-readable ABI parameters.\n *\n * @param abiParameters - ABI parameters\n * @returns Human-readable ABI parameters\n *\n * @example\n * const result = formatAbiParameters([\n *   //  ^? const result: 'address from, uint256 tokenId'\n *   { type: 'address', name: 'from' },\n *   { type: 'uint256', name: 'tokenId' },\n * ])\n */\nexport function formatAbiParameters(abiParameters) {\n    let params = '';\n    const length = abiParameters.length;\n    for (let i = 0; i < length; i++) {\n        const abiParameter = abiParameters[i];\n        params += formatAbiParameter(abiParameter);\n        if (i !== length - 1)\n            params += ', ';\n    }\n    return params;\n}\n//# sourceMappingURL=formatAbiParameters.js.map","import { formatAbiParameters, } from './formatAbiParameters.js';\n/**\n * Formats ABI item (e.g. error, event, function) into human-readable ABI item\n *\n * @param abiItem - ABI item\n * @returns Human-readable ABI item\n */\nexport function formatAbiItem(abiItem) {\n    if (abiItem.type === 'function')\n        return `function ${abiItem.name}(${formatAbiParameters(abiItem.inputs)})${abiItem.stateMutability && abiItem.stateMutability !== 'nonpayable'\n            ? ` ${abiItem.stateMutability}`\n            : ''}${abiItem.outputs.length\n            ? ` returns (${formatAbiParameters(abiItem.outputs)})`\n            : ''}`;\n    if (abiItem.type === 'event')\n        return `event ${abiItem.name}(${formatAbiParameters(abiItem.inputs)})`;\n    if (abiItem.type === 'error')\n        return `error ${abiItem.name}(${formatAbiParameters(abiItem.inputs)})`;\n    if (abiItem.type === 'constructor')\n        return `constructor(${formatAbiParameters(abiItem.inputs)})${abiItem.stateMutability === 'payable' ? ' payable' : ''}`;\n    if (abiItem.type === 'fallback')\n        return 'fallback()';\n    return 'receive() external payable';\n}\n//# sourceMappingURL=formatAbiItem.js.map","import { InvalidDefinitionTypeError, } from '../../errors/abi.js';\nexport function formatAbiItem(abiItem, { includeName = false } = {}) {\n    if (abiItem.type !== 'function' &&\n        abiItem.type !== 'event' &&\n        abiItem.type !== 'error')\n        throw new InvalidDefinitionTypeError(abiItem.type);\n    return `${abiItem.name}(${formatAbiParams(abiItem.inputs, { includeName })})`;\n}\nexport function formatAbiParams(params, { includeName = false } = {}) {\n    if (!params)\n        return '';\n    return params\n        .map((param) => formatAbiParam(param, { includeName }))\n        .join(includeName ? ', ' : ',');\n}\nfunction formatAbiParam(param, { includeName }) {\n    if (param.type.startsWith('tuple')) {\n        return `(${formatAbiParams(param.components, { includeName })})${param.type.slice('tuple'.length)}`;\n    }\n    return param.type + (includeName && param.name ? ` ${param.name}` : '');\n}\n//# sourceMappingURL=formatAbiItem.js.map","export function isHex(value, { strict = true } = {}) {\n    if (!value)\n        return false;\n    if (typeof value !== 'string')\n        return false;\n    return strict ? /^0x[0-9a-fA-F]*$/.test(value) : value.startsWith('0x');\n}\n//# sourceMappingURL=isHex.js.map","import { isHex } from './isHex.js';\n/**\n * @description Retrieves the size of the value (in bytes).\n *\n * @param value The value (hex or byte array) to retrieve the size of.\n * @returns The size of the value (in bytes).\n */\nexport function size(value) {\n    if (isHex(value, { strict: false }))\n        return Math.ceil((value.length - 2) / 2);\n    return value.length;\n}\n//# sourceMappingURL=size.js.map","export const version = '2.19.2';\n//# sourceMappingURL=version.js.map","import { version } from './version.js';\nlet errorConfig = {\n    getDocsUrl: ({ docsBaseUrl, docsPath = '', docsSlug, }) => docsPath\n        ? `${docsBaseUrl ?? 'https://viem.sh'}${docsPath}${docsSlug ? `#${docsSlug}` : ''}`\n        : undefined,\n    version,\n};\nexport function setErrorConfig(config) {\n    errorConfig = config;\n}\nexport class BaseError extends Error {\n    constructor(shortMessage, args = {}) {\n        const details = (() => {\n            if (args.cause instanceof BaseError)\n                return args.cause.details;\n            if (args.cause?.message)\n                return args.cause.message;\n            return args.details;\n        })();\n        const docsPath = (() => {\n            if (args.cause instanceof BaseError)\n                return args.cause.docsPath || args.docsPath;\n            return args.docsPath;\n        })();\n        const docsUrl = errorConfig.getDocsUrl?.({ ...args, docsPath });\n        const message = [\n            shortMessage || 'An error occurred.',\n            '',\n            ...(args.metaMessages ? [...args.metaMessages, ''] : []),\n            ...(docsUrl ? [`Docs: ${docsUrl}`] : []),\n            ...(details ? [`Details: ${details}`] : []),\n            ...(errorConfig.version ? [`Version: ${errorConfig.version}`] : []),\n        ].join('\\n');\n        super(message, args.cause ? { cause: args.cause } : undefined);\n        Object.defineProperty(this, \"details\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"docsPath\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"metaMessages\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"shortMessage\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"version\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 'BaseError'\n        });\n        this.details = details;\n        this.docsPath = docsPath;\n        this.metaMessages = args.metaMessages;\n        this.name = args.name ?? this.name;\n        this.shortMessage = shortMessage;\n        this.version = version;\n    }\n    walk(fn) {\n        return walk(this, fn);\n    }\n}\nfunction walk(err, fn) {\n    if (fn?.(err))\n        return err;\n    if (err && typeof err === 'object' && 'cause' in err)\n        return walk(err.cause, fn);\n    return fn ? null : err;\n}\n//# sourceMappingURL=base.js.map","import { formatAbiItem, formatAbiParams } from '../utils/abi/formatAbiItem.js';\nimport { size } from '../utils/data/size.js';\nimport { BaseError } from './base.js';\nexport class AbiConstructorNotFoundError extends BaseError {\n    constructor({ docsPath }) {\n        super([\n            'A constructor was not found on the ABI.',\n            'Make sure you are using the correct ABI and that the constructor exists on it.',\n        ].join('\\n'), {\n            docsPath,\n            name: 'AbiConstructorNotFoundError',\n        });\n    }\n}\nexport class AbiConstructorParamsNotFoundError extends BaseError {\n    constructor({ docsPath }) {\n        super([\n            'Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.',\n            'Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists.',\n        ].join('\\n'), {\n            docsPath,\n            name: 'AbiConstructorParamsNotFoundError',\n        });\n    }\n}\nexport class AbiDecodingDataSizeInvalidError extends BaseError {\n    constructor({ data, size }) {\n        super([\n            `Data size of ${size} bytes is invalid.`,\n            'Size must be in increments of 32 bytes (size % 32 === 0).',\n        ].join('\\n'), {\n            metaMessages: [`Data: ${data} (${size} bytes)`],\n            name: 'AbiDecodingDataSizeInvalidError',\n        });\n    }\n}\nexport class AbiDecodingDataSizeTooSmallError extends BaseError {\n    constructor({ data, params, size, }) {\n        super([`Data size of ${size} bytes is too small for given parameters.`].join('\\n'), {\n            metaMessages: [\n                `Params: (${formatAbiParams(params, { includeName: true })})`,\n                `Data:   ${data} (${size} bytes)`,\n            ],\n            name: 'AbiDecodingDataSizeTooSmallError',\n        });\n        Object.defineProperty(this, \"data\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"params\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"size\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.data = data;\n        this.params = params;\n        this.size = size;\n    }\n}\nexport class AbiDecodingZeroDataError extends BaseError {\n    constructor() {\n        super('Cannot decode zero data (\"0x\") with ABI parameters.', {\n            name: 'AbiDecodingZeroDataError',\n        });\n    }\n}\nexport class AbiEncodingArrayLengthMismatchError extends BaseError {\n    constructor({ expectedLength, givenLength, type, }) {\n        super([\n            `ABI encoding array length mismatch for type ${type}.`,\n            `Expected length: ${expectedLength}`,\n            `Given length: ${givenLength}`,\n        ].join('\\n'), { name: 'AbiEncodingArrayLengthMismatchError' });\n    }\n}\nexport class AbiEncodingBytesSizeMismatchError extends BaseError {\n    constructor({ expectedSize, value }) {\n        super(`Size of bytes \"${value}\" (bytes${size(value)}) does not match expected size (bytes${expectedSize}).`, { name: 'AbiEncodingBytesSizeMismatchError' });\n    }\n}\nexport class AbiEncodingLengthMismatchError extends BaseError {\n    constructor({ expectedLength, givenLength, }) {\n        super([\n            'ABI encoding params/values length mismatch.',\n            `Expected length (params): ${expectedLength}`,\n            `Given length (values): ${givenLength}`,\n        ].join('\\n'), { name: 'AbiEncodingLengthMismatchError' });\n    }\n}\nexport class AbiErrorInputsNotFoundError extends BaseError {\n    constructor(errorName, { docsPath }) {\n        super([\n            `Arguments (\\`args\\`) were provided to \"${errorName}\", but \"${errorName}\" on the ABI does not contain any parameters (\\`inputs\\`).`,\n            'Cannot encode error result without knowing what the parameter types are.',\n            'Make sure you are using the correct ABI and that the inputs exist on it.',\n        ].join('\\n'), {\n            docsPath,\n            name: 'AbiErrorInputsNotFoundError',\n        });\n    }\n}\nexport class AbiErrorNotFoundError extends BaseError {\n    constructor(errorName, { docsPath } = {}) {\n        super([\n            `Error ${errorName ? `\"${errorName}\" ` : ''}not found on ABI.`,\n            'Make sure you are using the correct ABI and that the error exists on it.',\n        ].join('\\n'), {\n            docsPath,\n            name: 'AbiErrorNotFoundError',\n        });\n    }\n}\nexport class AbiErrorSignatureNotFoundError extends BaseError {\n    constructor(signature, { docsPath }) {\n        super([\n            `Encoded error signature \"${signature}\" not found on ABI.`,\n            'Make sure you are using the correct ABI and that the error exists on it.',\n            `You can look up the decoded signature here: https://openchain.xyz/signatures?query=${signature}.`,\n        ].join('\\n'), {\n            docsPath,\n            name: 'AbiErrorSignatureNotFoundError',\n        });\n        Object.defineProperty(this, \"signature\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.signature = signature;\n    }\n}\nexport class AbiEventSignatureEmptyTopicsError extends BaseError {\n    constructor({ docsPath }) {\n        super('Cannot extract event signature from empty topics.', {\n            docsPath,\n            name: 'AbiEventSignatureEmptyTopicsError',\n        });\n    }\n}\nexport class AbiEventSignatureNotFoundError extends BaseError {\n    constructor(signature, { docsPath }) {\n        super([\n            `Encoded event signature \"${signature}\" not found on ABI.`,\n            'Make sure you are using the correct ABI and that the event exists on it.',\n            `You can look up the signature here: https://openchain.xyz/signatures?query=${signature}.`,\n        ].join('\\n'), {\n            docsPath,\n            name: 'AbiEventSignatureNotFoundError',\n        });\n    }\n}\nexport class AbiEventNotFoundError extends BaseError {\n    constructor(eventName, { docsPath } = {}) {\n        super([\n            `Event ${eventName ? `\"${eventName}\" ` : ''}not found on ABI.`,\n            'Make sure you are using the correct ABI and that the event exists on it.',\n        ].join('\\n'), {\n            docsPath,\n            name: 'AbiEventNotFoundError',\n        });\n    }\n}\nexport class AbiFunctionNotFoundError extends BaseError {\n    constructor(functionName, { docsPath } = {}) {\n        super([\n            `Function ${functionName ? `\"${functionName}\" ` : ''}not found on ABI.`,\n            'Make sure you are using the correct ABI and that the function exists on it.',\n        ].join('\\n'), {\n            docsPath,\n            name: 'AbiFunctionNotFoundError',\n        });\n    }\n}\nexport class AbiFunctionOutputsNotFoundError extends BaseError {\n    constructor(functionName, { docsPath }) {\n        super([\n            `Function \"${functionName}\" does not contain any \\`outputs\\` on ABI.`,\n            'Cannot decode function result without knowing what the parameter types are.',\n            'Make sure you are using the correct ABI and that the function exists on it.',\n        ].join('\\n'), {\n            docsPath,\n            name: 'AbiFunctionOutputsNotFoundError',\n        });\n    }\n}\nexport class AbiFunctionSignatureNotFoundError extends BaseError {\n    constructor(signature, { docsPath }) {\n        super([\n            `Encoded function signature \"${signature}\" not found on ABI.`,\n            'Make sure you are using the correct ABI and that the function exists on it.',\n            `You can look up the signature here: https://openchain.xyz/signatures?query=${signature}.`,\n        ].join('\\n'), {\n            docsPath,\n            name: 'AbiFunctionSignatureNotFoundError',\n        });\n    }\n}\nexport class AbiItemAmbiguityError extends BaseError {\n    constructor(x, y) {\n        super('Found ambiguous types in overloaded ABI items.', {\n            metaMessages: [\n                `\\`${x.type}\\` in \\`${formatAbiItem(x.abiItem)}\\`, and`,\n                `\\`${y.type}\\` in \\`${formatAbiItem(y.abiItem)}\\``,\n                '',\n                'These types encode differently and cannot be distinguished at runtime.',\n                'Remove one of the ambiguous items in the ABI.',\n            ],\n            name: 'AbiItemAmbiguityError',\n        });\n    }\n}\nexport class BytesSizeMismatchError extends BaseError {\n    constructor({ expectedSize, givenSize, }) {\n        super(`Expected bytes${expectedSize}, got bytes${givenSize}.`, {\n            name: 'BytesSizeMismatchError',\n        });\n    }\n}\nexport class DecodeLogDataMismatch extends BaseError {\n    constructor({ abiItem, data, params, size, }) {\n        super([\n            `Data size of ${size} bytes is too small for non-indexed event parameters.`,\n        ].join('\\n'), {\n            metaMessages: [\n                `Params: (${formatAbiParams(params, { includeName: true })})`,\n                `Data:   ${data} (${size} bytes)`,\n            ],\n            name: 'DecodeLogDataMismatch',\n        });\n        Object.defineProperty(this, \"abiItem\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"data\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"params\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"size\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.abiItem = abiItem;\n        this.data = data;\n        this.params = params;\n        this.size = size;\n    }\n}\nexport class DecodeLogTopicsMismatch extends BaseError {\n    constructor({ abiItem, param, }) {\n        super([\n            `Expected a topic for indexed event parameter${param.name ? ` \"${param.name}\"` : ''} on event \"${formatAbiItem(abiItem, { includeName: true })}\".`,\n        ].join('\\n'), { name: 'DecodeLogTopicsMismatch' });\n        Object.defineProperty(this, \"abiItem\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.abiItem = abiItem;\n    }\n}\nexport class InvalidAbiEncodingTypeError extends BaseError {\n    constructor(type, { docsPath }) {\n        super([\n            `Type \"${type}\" is not a valid encoding type.`,\n            'Please provide a valid ABI type.',\n        ].join('\\n'), { docsPath, name: 'InvalidAbiEncodingType' });\n    }\n}\nexport class InvalidAbiDecodingTypeError extends BaseError {\n    constructor(type, { docsPath }) {\n        super([\n            `Type \"${type}\" is not a valid decoding type.`,\n            'Please provide a valid ABI type.',\n        ].join('\\n'), { docsPath, name: 'InvalidAbiDecodingType' });\n    }\n}\nexport class InvalidArrayError extends BaseError {\n    constructor(value) {\n        super([`Value \"${value}\" is not a valid array.`].join('\\n'), {\n            name: 'InvalidArrayError',\n        });\n    }\n}\nexport class InvalidDefinitionTypeError extends BaseError {\n    constructor(type) {\n        super([\n            `\"${type}\" is not a valid definition type.`,\n            'Valid types: \"function\", \"event\", \"error\"',\n        ].join('\\n'), { name: 'InvalidDefinitionTypeError' });\n    }\n}\nexport class UnsupportedPackedAbiType extends BaseError {\n    constructor(type) {\n        super(`Type \"${type}\" is not supported for packed encoding.`, {\n            name: 'UnsupportedPackedAbiType',\n        });\n    }\n}\n//# sourceMappingURL=abi.js.map","import { BaseError } from './base.js';\nexport class SliceOffsetOutOfBoundsError extends BaseError {\n    constructor({ offset, position, size, }) {\n        super(`Slice ${position === 'start' ? 'starting' : 'ending'} at offset \"${offset}\" is out-of-bounds (size: ${size}).`, { name: 'SliceOffsetOutOfBoundsError' });\n    }\n}\nexport class SizeExceedsPaddingSizeError extends BaseError {\n    constructor({ size, targetSize, type, }) {\n        super(`${type.charAt(0).toUpperCase()}${type\n            .slice(1)\n            .toLowerCase()} size (${size}) exceeds padding size (${targetSize}).`, { name: 'SizeExceedsPaddingSizeError' });\n    }\n}\nexport class InvalidBytesLengthError extends BaseError {\n    constructor({ size, targetSize, type, }) {\n        super(`${type.charAt(0).toUpperCase()}${type\n            .slice(1)\n            .toLowerCase()} is expected to be ${targetSize} ${type} long, but is ${size} ${type} long.`, { name: 'InvalidBytesLengthError' });\n    }\n}\n//# sourceMappingURL=data.js.map","import { SizeExceedsPaddingSizeError, } from '../../errors/data.js';\nexport function pad(hexOrBytes, { dir, size = 32 } = {}) {\n    if (typeof hexOrBytes === 'string')\n        return padHex(hexOrBytes, { dir, size });\n    return padBytes(hexOrBytes, { dir, size });\n}\nexport function padHex(hex_, { dir, size = 32 } = {}) {\n    if (size === null)\n        return hex_;\n    const hex = hex_.replace('0x', '');\n    if (hex.length > size * 2)\n        throw new SizeExceedsPaddingSizeError({\n            size: Math.ceil(hex.length / 2),\n            targetSize: size,\n            type: 'hex',\n        });\n    return `0x${hex[dir === 'right' ? 'padEnd' : 'padStart'](size * 2, '0')}`;\n}\nexport function padBytes(bytes, { dir, size = 32 } = {}) {\n    if (size === null)\n        return bytes;\n    if (bytes.length > size)\n        throw new SizeExceedsPaddingSizeError({\n            size: bytes.length,\n            targetSize: size,\n            type: 'bytes',\n        });\n    const paddedBytes = new Uint8Array(size);\n    for (let i = 0; i < size; i++) {\n        const padEnd = dir === 'right';\n        paddedBytes[padEnd ? i : size - i - 1] =\n            bytes[padEnd ? i : bytes.length - i - 1];\n    }\n    return paddedBytes;\n}\n//# sourceMappingURL=pad.js.map","import { BaseError } from './base.js';\nexport class IntegerOutOfRangeError extends BaseError {\n    constructor({ max, min, signed, size, value, }) {\n        super(`Number \"${value}\" is not in safe ${size ? `${size * 8}-bit ${signed ? 'signed' : 'unsigned'} ` : ''}integer range ${max ? `(${min} to ${max})` : `(above ${min})`}`, { name: 'IntegerOutOfRangeError' });\n    }\n}\nexport class InvalidBytesBooleanError extends BaseError {\n    constructor(bytes) {\n        super(`Bytes value \"${bytes}\" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`, {\n            name: 'InvalidBytesBooleanError',\n        });\n    }\n}\nexport class InvalidHexBooleanError extends BaseError {\n    constructor(hex) {\n        super(`Hex value \"${hex}\" is not a valid boolean. The hex value must be \"0x0\" (false) or \"0x1\" (true).`, { name: 'InvalidHexBooleanError' });\n    }\n}\nexport class InvalidHexValueError extends BaseError {\n    constructor(value) {\n        super(`Hex value \"${value}\" is an odd length (${value.length}). It must be an even length.`, { name: 'InvalidHexValueError' });\n    }\n}\nexport class SizeOverflowError extends BaseError {\n    constructor({ givenSize, maxSize }) {\n        super(`Size cannot exceed ${maxSize} bytes. Given size: ${givenSize} bytes.`, { name: 'SizeOverflowError' });\n    }\n}\n//# sourceMappingURL=encoding.js.map","import { InvalidHexBooleanError, SizeOverflowError, } from '../../errors/encoding.js';\nimport { size as size_ } from '../data/size.js';\nimport { trim } from '../data/trim.js';\nimport { hexToBytes } from './toBytes.js';\nexport function assertSize(hexOrBytes, { size }) {\n    if (size_(hexOrBytes) > size)\n        throw new SizeOverflowError({\n            givenSize: size_(hexOrBytes),\n            maxSize: size,\n        });\n}\n/**\n * Decodes a hex string into a string, number, bigint, boolean, or byte array.\n *\n * - Docs: https://viem.sh/docs/utilities/fromHex\n * - Example: https://viem.sh/docs/utilities/fromHex#usage\n *\n * @param hex Hex string to decode.\n * @param toOrOpts Type to convert to or options.\n * @returns Decoded value.\n *\n * @example\n * import { fromHex } from 'viem'\n * const data = fromHex('0x1a4', 'number')\n * // 420\n *\n * @example\n * import { fromHex } from 'viem'\n * const data = fromHex('0x48656c6c6f20576f726c6421', 'string')\n * // 'Hello world'\n *\n * @example\n * import { fromHex } from 'viem'\n * const data = fromHex('0x48656c6c6f20576f726c64210000000000000000000000000000000000000000', {\n *   size: 32,\n *   to: 'string'\n * })\n * // 'Hello world'\n */\nexport function fromHex(hex, toOrOpts) {\n    const opts = typeof toOrOpts === 'string' ? { to: toOrOpts } : toOrOpts;\n    const to = opts.to;\n    if (to === 'number')\n        return hexToNumber(hex, opts);\n    if (to === 'bigint')\n        return hexToBigInt(hex, opts);\n    if (to === 'string')\n        return hexToString(hex, opts);\n    if (to === 'boolean')\n        return hexToBool(hex, opts);\n    return hexToBytes(hex, opts);\n}\n/**\n * Decodes a hex value into a bigint.\n *\n * - Docs: https://viem.sh/docs/utilities/fromHex#hextobigint\n *\n * @param hex Hex value to decode.\n * @param opts Options.\n * @returns BigInt value.\n *\n * @example\n * import { hexToBigInt } from 'viem'\n * const data = hexToBigInt('0x1a4', { signed: true })\n * // 420n\n *\n * @example\n * import { hexToBigInt } from 'viem'\n * const data = hexToBigInt('0x00000000000000000000000000000000000000000000000000000000000001a4', { size: 32 })\n * // 420n\n */\nexport function hexToBigInt(hex, opts = {}) {\n    const { signed } = opts;\n    if (opts.size)\n        assertSize(hex, { size: opts.size });\n    const value = BigInt(hex);\n    if (!signed)\n        return value;\n    const size = (hex.length - 2) / 2;\n    const max = (1n << (BigInt(size) * 8n - 1n)) - 1n;\n    if (value <= max)\n        return value;\n    return value - BigInt(`0x${'f'.padStart(size * 2, 'f')}`) - 1n;\n}\n/**\n * Decodes a hex value into a boolean.\n *\n * - Docs: https://viem.sh/docs/utilities/fromHex#hextobool\n *\n * @param hex Hex value to decode.\n * @param opts Options.\n * @returns Boolean value.\n *\n * @example\n * import { hexToBool } from 'viem'\n * const data = hexToBool('0x01')\n * // true\n *\n * @example\n * import { hexToBool } from 'viem'\n * const data = hexToBool('0x0000000000000000000000000000000000000000000000000000000000000001', { size: 32 })\n * // true\n */\nexport function hexToBool(hex_, opts = {}) {\n    let hex = hex_;\n    if (opts.size) {\n        assertSize(hex, { size: opts.size });\n        hex = trim(hex);\n    }\n    if (trim(hex) === '0x00')\n        return false;\n    if (trim(hex) === '0x01')\n        return true;\n    throw new InvalidHexBooleanError(hex);\n}\n/**\n * Decodes a hex string into a number.\n *\n * - Docs: https://viem.sh/docs/utilities/fromHex#hextonumber\n *\n * @param hex Hex value to decode.\n * @param opts Options.\n * @returns Number value.\n *\n * @example\n * import { hexToNumber } from 'viem'\n * const data = hexToNumber('0x1a4')\n * // 420\n *\n * @example\n * import { hexToNumber } from 'viem'\n * const data = hexToBigInt('0x00000000000000000000000000000000000000000000000000000000000001a4', { size: 32 })\n * // 420\n */\nexport function hexToNumber(hex, opts = {}) {\n    return Number(hexToBigInt(hex, opts));\n}\n/**\n * Decodes a hex value into a UTF-8 string.\n *\n * - Docs: https://viem.sh/docs/utilities/fromHex#hextostring\n *\n * @param hex Hex value to decode.\n * @param opts Options.\n * @returns String value.\n *\n * @example\n * import { hexToString } from 'viem'\n * const data = hexToString('0x48656c6c6f20576f726c6421')\n * // 'Hello world!'\n *\n * @example\n * import { hexToString } from 'viem'\n * const data = hexToString('0x48656c6c6f20576f726c64210000000000000000000000000000000000000000', {\n *  size: 32,\n * })\n * // 'Hello world'\n */\nexport function hexToString(hex, opts = {}) {\n    let bytes = hexToBytes(hex);\n    if (opts.size) {\n        assertSize(bytes, { size: opts.size });\n        bytes = trim(bytes, { dir: 'right' });\n    }\n    return new TextDecoder().decode(bytes);\n}\n//# sourceMappingURL=fromHex.js.map","import { IntegerOutOfRangeError, } from '../../errors/encoding.js';\nimport { pad } from '../data/pad.js';\nimport { assertSize } from './fromHex.js';\nconst hexes = /*#__PURE__*/ Array.from({ length: 256 }, (_v, i) => i.toString(16).padStart(2, '0'));\n/**\n * Encodes a string, number, bigint, or ByteArray into a hex string\n *\n * - Docs: https://viem.sh/docs/utilities/toHex\n * - Example: https://viem.sh/docs/utilities/toHex#usage\n *\n * @param value Value to encode.\n * @param opts Options.\n * @returns Hex value.\n *\n * @example\n * import { toHex } from 'viem'\n * const data = toHex('Hello world')\n * // '0x48656c6c6f20776f726c6421'\n *\n * @example\n * import { toHex } from 'viem'\n * const data = toHex(420)\n * // '0x1a4'\n *\n * @example\n * import { toHex } from 'viem'\n * const data = toHex('Hello world', { size: 32 })\n * // '0x48656c6c6f20776f726c64210000000000000000000000000000000000000000'\n */\nexport function toHex(value, opts = {}) {\n    if (typeof value === 'number' || typeof value === 'bigint')\n        return numberToHex(value, opts);\n    if (typeof value === 'string') {\n        return stringToHex(value, opts);\n    }\n    if (typeof value === 'boolean')\n        return boolToHex(value, opts);\n    return bytesToHex(value, opts);\n}\n/**\n * Encodes a boolean into a hex string\n *\n * - Docs: https://viem.sh/docs/utilities/toHex#booltohex\n *\n * @param value Value to encode.\n * @param opts Options.\n * @returns Hex value.\n *\n * @example\n * import { boolToHex } from 'viem'\n * const data = boolToHex(true)\n * // '0x1'\n *\n * @example\n * import { boolToHex } from 'viem'\n * const data = boolToHex(false)\n * // '0x0'\n *\n * @example\n * import { boolToHex } from 'viem'\n * const data = boolToHex(true, { size: 32 })\n * // '0x0000000000000000000000000000000000000000000000000000000000000001'\n */\nexport function boolToHex(value, opts = {}) {\n    const hex = `0x${Number(value)}`;\n    if (typeof opts.size === 'number') {\n        assertSize(hex, { size: opts.size });\n        return pad(hex, { size: opts.size });\n    }\n    return hex;\n}\n/**\n * Encodes a bytes array into a hex string\n *\n * - Docs: https://viem.sh/docs/utilities/toHex#bytestohex\n *\n * @param value Value to encode.\n * @param opts Options.\n * @returns Hex value.\n *\n * @example\n * import { bytesToHex } from 'viem'\n * const data = bytesToHex(Uint8Array.from([72, 101, 108, 108, 111, 32, 87, 111, 114, 108, 100, 33])\n * // '0x48656c6c6f20576f726c6421'\n *\n * @example\n * import { bytesToHex } from 'viem'\n * const data = bytesToHex(Uint8Array.from([72, 101, 108, 108, 111, 32, 87, 111, 114, 108, 100, 33]), { size: 32 })\n * // '0x48656c6c6f20576f726c64210000000000000000000000000000000000000000'\n */\nexport function bytesToHex(value, opts = {}) {\n    let string = '';\n    for (let i = 0; i < value.length; i++) {\n        string += hexes[value[i]];\n    }\n    const hex = `0x${string}`;\n    if (typeof opts.size === 'number') {\n        assertSize(hex, { size: opts.size });\n        return pad(hex, { dir: 'right', size: opts.size });\n    }\n    return hex;\n}\n/**\n * Encodes a number or bigint into a hex string\n *\n * - Docs: https://viem.sh/docs/utilities/toHex#numbertohex\n *\n * @param value Value to encode.\n * @param opts Options.\n * @returns Hex value.\n *\n * @example\n * import { numberToHex } from 'viem'\n * const data = numberToHex(420)\n * // '0x1a4'\n *\n * @example\n * import { numberToHex } from 'viem'\n * const data = numberToHex(420, { size: 32 })\n * // '0x00000000000000000000000000000000000000000000000000000000000001a4'\n */\nexport function numberToHex(value_, opts = {}) {\n    const { signed, size } = opts;\n    const value = BigInt(value_);\n    let maxValue;\n    if (size) {\n        if (signed)\n            maxValue = (1n << (BigInt(size) * 8n - 1n)) - 1n;\n        else\n            maxValue = 2n ** (BigInt(size) * 8n) - 1n;\n    }\n    else if (typeof value_ === 'number') {\n        maxValue = BigInt(Number.MAX_SAFE_INTEGER);\n    }\n    const minValue = typeof maxValue === 'bigint' && signed ? -maxValue - 1n : 0;\n    if ((maxValue && value > maxValue) || value < minValue) {\n        const suffix = typeof value_ === 'bigint' ? 'n' : '';\n        throw new IntegerOutOfRangeError({\n            max: maxValue ? `${maxValue}${suffix}` : undefined,\n            min: `${minValue}${suffix}`,\n            signed,\n            size,\n            value: `${value_}${suffix}`,\n        });\n    }\n    const hex = `0x${(signed && value < 0\n        ? (1n << BigInt(size * 8)) + BigInt(value)\n        : value).toString(16)}`;\n    if (size)\n        return pad(hex, { size });\n    return hex;\n}\nconst encoder = /*#__PURE__*/ new TextEncoder();\n/**\n * Encodes a UTF-8 string into a hex string\n *\n * - Docs: https://viem.sh/docs/utilities/toHex#stringtohex\n *\n * @param value Value to encode.\n * @param opts Options.\n * @returns Hex value.\n *\n * @example\n * import { stringToHex } from 'viem'\n * const data = stringToHex('Hello World!')\n * // '0x48656c6c6f20576f726c6421'\n *\n * @example\n * import { stringToHex } from 'viem'\n * const data = stringToHex('Hello World!', { size: 32 })\n * // '0x48656c6c6f20576f726c64210000000000000000000000000000000000000000'\n */\nexport function stringToHex(value_, opts = {}) {\n    const value = encoder.encode(value_);\n    return bytesToHex(value, opts);\n}\n//# sourceMappingURL=toHex.js.map","import { BaseError } from '../../errors/base.js';\nimport { isHex } from '../data/isHex.js';\nimport { pad } from '../data/pad.js';\nimport { assertSize } from './fromHex.js';\nimport { numberToHex, } from './toHex.js';\nconst encoder = /*#__PURE__*/ new TextEncoder();\n/**\n * Encodes a UTF-8 string, hex value, bigint, number or boolean to a byte array.\n *\n * - Docs: https://viem.sh/docs/utilities/toBytes\n * - Example: https://viem.sh/docs/utilities/toBytes#usage\n *\n * @param value Value to encode.\n * @param opts Options.\n * @returns Byte array value.\n *\n * @example\n * import { toBytes } from 'viem'\n * const data = toBytes('Hello world')\n * // Uint8Array([72, 101, 108, 108, 111, 32, 87, 111, 114, 108, 100, 33])\n *\n * @example\n * import { toBytes } from 'viem'\n * const data = toBytes(420)\n * // Uint8Array([1, 164])\n *\n * @example\n * import { toBytes } from 'viem'\n * const data = toBytes(420, { size: 4 })\n * // Uint8Array([0, 0, 1, 164])\n */\nexport function toBytes(value, opts = {}) {\n    if (typeof value === 'number' || typeof value === 'bigint')\n        return numberToBytes(value, opts);\n    if (typeof value === 'boolean')\n        return boolToBytes(value, opts);\n    if (isHex(value))\n        return hexToBytes(value, opts);\n    return stringToBytes(value, opts);\n}\n/**\n * Encodes a boolean into a byte array.\n *\n * - Docs: https://viem.sh/docs/utilities/toBytes#booltobytes\n *\n * @param value Boolean value to encode.\n * @param opts Options.\n * @returns Byte array value.\n *\n * @example\n * import { boolToBytes } from 'viem'\n * const data = boolToBytes(true)\n * // Uint8Array([1])\n *\n * @example\n * import { boolToBytes } from 'viem'\n * const data = boolToBytes(true, { size: 32 })\n * // Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1])\n */\nexport function boolToBytes(value, opts = {}) {\n    const bytes = new Uint8Array(1);\n    bytes[0] = Number(value);\n    if (typeof opts.size === 'number') {\n        assertSize(bytes, { size: opts.size });\n        return pad(bytes, { size: opts.size });\n    }\n    return bytes;\n}\n// We use very optimized technique to convert hex string to byte array\nconst charCodeMap = {\n    zero: 48,\n    nine: 57,\n    A: 65,\n    F: 70,\n    a: 97,\n    f: 102,\n};\nfunction charCodeToBase16(char) {\n    if (char >= charCodeMap.zero && char <= charCodeMap.nine)\n        return char - charCodeMap.zero;\n    if (char >= charCodeMap.A && char <= charCodeMap.F)\n        return char - (charCodeMap.A - 10);\n    if (char >= charCodeMap.a && char <= charCodeMap.f)\n        return char - (charCodeMap.a - 10);\n    return undefined;\n}\n/**\n * Encodes a hex string into a byte array.\n *\n * - Docs: https://viem.sh/docs/utilities/toBytes#hextobytes\n *\n * @param hex Hex string to encode.\n * @param opts Options.\n * @returns Byte array value.\n *\n * @example\n * import { hexToBytes } from 'viem'\n * const data = hexToBytes('0x48656c6c6f20776f726c6421')\n * // Uint8Array([72, 101, 108, 108, 111, 32, 87, 111, 114, 108, 100, 33])\n *\n * @example\n * import { hexToBytes } from 'viem'\n * const data = hexToBytes('0x48656c6c6f20776f726c6421', { size: 32 })\n * // Uint8Array([72, 101, 108, 108, 111, 32, 87, 111, 114, 108, 100, 33, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0])\n */\nexport function hexToBytes(hex_, opts = {}) {\n    let hex = hex_;\n    if (opts.size) {\n        assertSize(hex, { size: opts.size });\n        hex = pad(hex, { dir: 'right', size: opts.size });\n    }\n    let hexString = hex.slice(2);\n    if (hexString.length % 2)\n        hexString = `0${hexString}`;\n    const length = hexString.length / 2;\n    const bytes = new Uint8Array(length);\n    for (let index = 0, j = 0; index < length; index++) {\n        const nibbleLeft = charCodeToBase16(hexString.charCodeAt(j++));\n        const nibbleRight = charCodeToBase16(hexString.charCodeAt(j++));\n        if (nibbleLeft === undefined || nibbleRight === undefined) {\n            throw new BaseError(`Invalid byte sequence (\"${hexString[j - 2]}${hexString[j - 1]}\" in \"${hexString}\").`);\n        }\n        bytes[index] = nibbleLeft * 16 + nibbleRight;\n    }\n    return bytes;\n}\n/**\n * Encodes a number into a byte array.\n *\n * - Docs: https://viem.sh/docs/utilities/toBytes#numbertobytes\n *\n * @param value Number to encode.\n * @param opts Options.\n * @returns Byte array value.\n *\n * @example\n * import { numberToBytes } from 'viem'\n * const data = numberToBytes(420)\n * // Uint8Array([1, 164])\n *\n * @example\n * import { numberToBytes } from 'viem'\n * const data = numberToBytes(420, { size: 4 })\n * // Uint8Array([0, 0, 1, 164])\n */\nexport function numberToBytes(value, opts) {\n    const hex = numberToHex(value, opts);\n    return hexToBytes(hex);\n}\n/**\n * Encodes a UTF-8 string into a byte array.\n *\n * - Docs: https://viem.sh/docs/utilities/toBytes#stringtobytes\n *\n * @param value String to encode.\n * @param opts Options.\n * @returns Byte array value.\n *\n * @example\n * import { stringToBytes } from 'viem'\n * const data = stringToBytes('Hello world!')\n * // Uint8Array([72, 101, 108, 108, 111, 32, 119, 111, 114, 108, 100, 33])\n *\n * @example\n * import { stringToBytes } from 'viem'\n * const data = stringToBytes('Hello world!', { size: 32 })\n * // Uint8Array([72, 101, 108, 108, 111, 32, 87, 111, 114, 108, 100, 33, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0])\n */\nexport function stringToBytes(value, opts = {}) {\n    const bytes = encoder.encode(value);\n    if (typeof opts.size === 'number') {\n        assertSize(bytes, { size: opts.size });\n        return pad(bytes, { dir: 'right', size: opts.size });\n    }\n    return bytes;\n}\n//# sourceMappingURL=toBytes.js.map","function number(n) {\n    if (!Number.isSafeInteger(n) || n < 0)\n        throw new Error(`positive integer expected, not ${n}`);\n}\nfunction bool(b) {\n    if (typeof b !== 'boolean')\n        throw new Error(`boolean expected, not ${b}`);\n}\n// copied from utils\nexport function isBytes(a) {\n    return (a instanceof Uint8Array ||\n        (a != null && typeof a === 'object' && a.constructor.name === 'Uint8Array'));\n}\nfunction bytes(b, ...lengths) {\n    if (!isBytes(b))\n        throw new Error('Uint8Array expected');\n    if (lengths.length > 0 && !lengths.includes(b.length))\n        throw new Error(`Uint8Array expected of length ${lengths}, not of length=${b.length}`);\n}\nfunction hash(h) {\n    if (typeof h !== 'function' || typeof h.create !== 'function')\n        throw new Error('Hash should be wrapped by utils.wrapConstructor');\n    number(h.outputLen);\n    number(h.blockLen);\n}\nfunction exists(instance, checkFinished = true) {\n    if (instance.destroyed)\n        throw new Error('Hash instance has been destroyed');\n    if (checkFinished && instance.finished)\n        throw new Error('Hash#digest() has already been called');\n}\nfunction output(out, instance) {\n    bytes(out);\n    const min = instance.outputLen;\n    if (out.length < min) {\n        throw new Error(`digestInto() expects output buffer of length at least ${min}`);\n    }\n}\nexport { number, bool, bytes, hash, exists, output };\nconst assert = { number, bool, bytes, hash, exists, output };\nexport default assert;\n//# sourceMappingURL=_assert.js.map","const U32_MASK64 = /* @__PURE__ */ BigInt(2 ** 32 - 1);\nconst _32n = /* @__PURE__ */ BigInt(32);\n// We are not using BigUint64Array, because they are extremely slow as per 2022\nfunction fromBig(n, le = false) {\n    if (le)\n        return { h: Number(n & U32_MASK64), l: Number((n >> _32n) & U32_MASK64) };\n    return { h: Number((n >> _32n) & U32_MASK64) | 0, l: Number(n & U32_MASK64) | 0 };\n}\nfunction split(lst, le = false) {\n    let Ah = new Uint32Array(lst.length);\n    let Al = new Uint32Array(lst.length);\n    for (let i = 0; i < lst.length; i++) {\n        const { h, l } = fromBig(lst[i], le);\n        [Ah[i], Al[i]] = [h, l];\n    }\n    return [Ah, Al];\n}\nconst toBig = (h, l) => (BigInt(h >>> 0) << _32n) | BigInt(l >>> 0);\n// for Shift in [0, 32)\nconst shrSH = (h, _l, s) => h >>> s;\nconst shrSL = (h, l, s) => (h << (32 - s)) | (l >>> s);\n// Right rotate for Shift in [1, 32)\nconst rotrSH = (h, l, s) => (h >>> s) | (l << (32 - s));\nconst rotrSL = (h, l, s) => (h << (32 - s)) | (l >>> s);\n// Right rotate for Shift in (32, 64), NOTE: 32 is special case.\nconst rotrBH = (h, l, s) => (h << (64 - s)) | (l >>> (s - 32));\nconst rotrBL = (h, l, s) => (h >>> (s - 32)) | (l << (64 - s));\n// Right rotate for shift===32 (just swaps l&h)\nconst rotr32H = (_h, l) => l;\nconst rotr32L = (h, _l) => h;\n// Left rotate for Shift in [1, 32)\nconst rotlSH = (h, l, s) => (h << s) | (l >>> (32 - s));\nconst rotlSL = (h, l, s) => (l << s) | (h >>> (32 - s));\n// Left rotate for Shift in (32, 64), NOTE: 32 is special case.\nconst rotlBH = (h, l, s) => (l << (s - 32)) | (h >>> (64 - s));\nconst rotlBL = (h, l, s) => (h << (s - 32)) | (l >>> (64 - s));\n// JS uses 32-bit signed integers for bitwise operations which means we cannot\n// simple take carry out of low bit sum by shift, we need to use division.\nfunction add(Ah, Al, Bh, Bl) {\n    const l = (Al >>> 0) + (Bl >>> 0);\n    return { h: (Ah + Bh + ((l / 2 ** 32) | 0)) | 0, l: l | 0 };\n}\n// Addition with more than 2 elements\nconst add3L = (Al, Bl, Cl) => (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0);\nconst add3H = (low, Ah, Bh, Ch) => (Ah + Bh + Ch + ((low / 2 ** 32) | 0)) | 0;\nconst add4L = (Al, Bl, Cl, Dl) => (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0) + (Dl >>> 0);\nconst add4H = (low, Ah, Bh, Ch, Dh) => (Ah + Bh + Ch + Dh + ((low / 2 ** 32) | 0)) | 0;\nconst add5L = (Al, Bl, Cl, Dl, El) => (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0) + (Dl >>> 0) + (El >>> 0);\nconst add5H = (low, Ah, Bh, Ch, Dh, Eh) => (Ah + Bh + Ch + Dh + Eh + ((low / 2 ** 32) | 0)) | 0;\n// prettier-ignore\nexport { fromBig, split, toBig, shrSH, shrSL, rotrSH, rotrSL, rotrBH, rotrBL, rotr32H, rotr32L, rotlSH, rotlSL, rotlBH, rotlBL, add, add3L, add3H, add4L, add4H, add5H, add5L, };\n// prettier-ignore\nconst u64 = {\n    fromBig, split, toBig,\n    shrSH, shrSL,\n    rotrSH, rotrSL, rotrBH, rotrBL,\n    rotr32H, rotr32L,\n    rotlSH, rotlSL, rotlBH, rotlBL,\n    add, add3L, add3H, add4L, add4H, add5H, add5L,\n};\nexport default u64;\n//# sourceMappingURL=_u64.js.map","/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */\n// We use WebCrypto aka globalThis.crypto, which exists in browsers and node.js 16+.\n// node.js versions earlier than v19 don't declare it in global scope.\n// For node.js, package.json#exports field mapping rewrites import\n// from `crypto` to `cryptoNode`, which imports native module.\n// Makes the utils un-importable in browsers without a bundler.\n// Once node.js 18 is deprecated (2025-04-30), we can just drop the import.\nimport { crypto } from '@noble/hashes/crypto';\nimport { bytes as abytes } from './_assert.js';\n// export { isBytes } from './_assert.js';\n// We can't reuse isBytes from _assert, because somehow this causes huge perf issues\nexport function isBytes(a) {\n    return (a instanceof Uint8Array ||\n        (a != null && typeof a === 'object' && a.constructor.name === 'Uint8Array'));\n}\n// Cast array to different type\nexport const u8 = (arr) => new Uint8Array(arr.buffer, arr.byteOffset, arr.byteLength);\nexport const u32 = (arr) => new Uint32Array(arr.buffer, arr.byteOffset, Math.floor(arr.byteLength / 4));\n// Cast array to view\nexport const createView = (arr) => new DataView(arr.buffer, arr.byteOffset, arr.byteLength);\n// The rotate right (circular right shift) operation for uint32\nexport const rotr = (word, shift) => (word << (32 - shift)) | (word >>> shift);\n// The rotate left (circular left shift) operation for uint32\nexport const rotl = (word, shift) => (word << shift) | ((word >>> (32 - shift)) >>> 0);\nexport const isLE = new Uint8Array(new Uint32Array([0x11223344]).buffer)[0] === 0x44;\n// The byte swap operation for uint32\nexport const byteSwap = (word) => ((word << 24) & 0xff000000) |\n    ((word << 8) & 0xff0000) |\n    ((word >>> 8) & 0xff00) |\n    ((word >>> 24) & 0xff);\n// Conditionally byte swap if on a big-endian platform\nexport const byteSwapIfBE = isLE ? (n) => n : (n) => byteSwap(n);\n// In place byte swap for Uint32Array\nexport function byteSwap32(arr) {\n    for (let i = 0; i < arr.length; i++) {\n        arr[i] = byteSwap(arr[i]);\n    }\n}\n// Array where index 0xf0 (240) is mapped to string 'f0'\nconst hexes = /* @__PURE__ */ Array.from({ length: 256 }, (_, i) => i.toString(16).padStart(2, '0'));\n/**\n * @example bytesToHex(Uint8Array.from([0xca, 0xfe, 0x01, 0x23])) // 'cafe0123'\n */\nexport function bytesToHex(bytes) {\n    abytes(bytes);\n    // pre-caching improves the speed 6x\n    let hex = '';\n    for (let i = 0; i < bytes.length; i++) {\n        hex += hexes[bytes[i]];\n    }\n    return hex;\n}\n// We use optimized technique to convert hex string to byte array\nconst asciis = { _0: 48, _9: 57, _A: 65, _F: 70, _a: 97, _f: 102 };\nfunction asciiToBase16(char) {\n    if (char >= asciis._0 && char <= asciis._9)\n        return char - asciis._0;\n    if (char >= asciis._A && char <= asciis._F)\n        return char - (asciis._A - 10);\n    if (char >= asciis._a && char <= asciis._f)\n        return char - (asciis._a - 10);\n    return;\n}\n/**\n * @example hexToBytes('cafe0123') // Uint8Array.from([0xca, 0xfe, 0x01, 0x23])\n */\nexport function hexToBytes(hex) {\n    if (typeof hex !== 'string')\n        throw new Error('hex string expected, got ' + typeof hex);\n    const hl = hex.length;\n    const al = hl / 2;\n    if (hl % 2)\n        throw new Error('padded hex string expected, got unpadded hex of length ' + hl);\n    const array = new Uint8Array(al);\n    for (let ai = 0, hi = 0; ai < al; ai++, hi += 2) {\n        const n1 = asciiToBase16(hex.charCodeAt(hi));\n        const n2 = asciiToBase16(hex.charCodeAt(hi + 1));\n        if (n1 === undefined || n2 === undefined) {\n            const char = hex[hi] + hex[hi + 1];\n            throw new Error('hex string expected, got non-hex character \"' + char + '\" at index ' + hi);\n        }\n        array[ai] = n1 * 16 + n2;\n    }\n    return array;\n}\n// There is no setImmediate in browser and setTimeout is slow.\n// call of async fn will return Promise, which will be fullfiled only on\n// next scheduler queue processing step and this is exactly what we need.\nexport const nextTick = async () => { };\n// Returns control to thread each 'tick' ms to avoid blocking\nexport async function asyncLoop(iters, tick, cb) {\n    let ts = Date.now();\n    for (let i = 0; i < iters; i++) {\n        cb(i);\n        // Date.now() is not monotonic, so in case if clock goes backwards we return return control too\n        const diff = Date.now() - ts;\n        if (diff >= 0 && diff < tick)\n            continue;\n        await nextTick();\n        ts += diff;\n    }\n}\n/**\n * @example utf8ToBytes('abc') // new Uint8Array([97, 98, 99])\n */\nexport function utf8ToBytes(str) {\n    if (typeof str !== 'string')\n        throw new Error(`utf8ToBytes expected string, got ${typeof str}`);\n    return new Uint8Array(new TextEncoder().encode(str)); // https://bugzil.la/1681809\n}\n/**\n * Normalizes (non-hex) string or Uint8Array to Uint8Array.\n * Warning: when Uint8Array is passed, it would NOT get copied.\n * Keep in mind for future mutable operations.\n */\nexport function toBytes(data) {\n    if (typeof data === 'string')\n        data = utf8ToBytes(data);\n    abytes(data);\n    return data;\n}\n/**\n * Copies several Uint8Arrays into one.\n */\nexport function concatBytes(...arrays) {\n    let sum = 0;\n    for (let i = 0; i < arrays.length; i++) {\n        const a = arrays[i];\n        abytes(a);\n        sum += a.length;\n    }\n    const res = new Uint8Array(sum);\n    for (let i = 0, pad = 0; i < arrays.length; i++) {\n        const a = arrays[i];\n        res.set(a, pad);\n        pad += a.length;\n    }\n    return res;\n}\n// For runtime check if class implements interface\nexport class Hash {\n    // Safe version that clones internal state\n    clone() {\n        return this._cloneInto();\n    }\n}\nconst toStr = {}.toString;\nexport function checkOpts(defaults, opts) {\n    if (opts !== undefined && toStr.call(opts) !== '[object Object]')\n        throw new Error('Options should be object or undefined');\n    const merged = Object.assign(defaults, opts);\n    return merged;\n}\nexport function wrapConstructor(hashCons) {\n    const hashC = (msg) => hashCons().update(toBytes(msg)).digest();\n    const tmp = hashCons();\n    hashC.outputLen = tmp.outputLen;\n    hashC.blockLen = tmp.blockLen;\n    hashC.create = () => hashCons();\n    return hashC;\n}\nexport function wrapConstructorWithOpts(hashCons) {\n    const hashC = (msg, opts) => hashCons(opts).update(toBytes(msg)).digest();\n    const tmp = hashCons({});\n    hashC.outputLen = tmp.outputLen;\n    hashC.blockLen = tmp.blockLen;\n    hashC.create = (opts) => hashCons(opts);\n    return hashC;\n}\nexport function wrapXOFConstructorWithOpts(hashCons) {\n    const hashC = (msg, opts) => hashCons(opts).update(toBytes(msg)).digest();\n    const tmp = hashCons({});\n    hashC.outputLen = tmp.outputLen;\n    hashC.blockLen = tmp.blockLen;\n    hashC.create = (opts) => hashCons(opts);\n    return hashC;\n}\n/**\n * Secure PRNG. Uses `crypto.getRandomValues`, which defers to OS.\n */\nexport function randomBytes(bytesLength = 32) {\n    if (crypto && typeof crypto.getRandomValues === 'function') {\n        return crypto.getRandomValues(new Uint8Array(bytesLength));\n    }\n    throw new Error('crypto.getRandomValues must be defined');\n}\n//# sourceMappingURL=utils.js.map","import { bytes, exists, number, output } from './_assert.js';\nimport { rotlBH, rotlBL, rotlSH, rotlSL, split } from './_u64.js';\nimport { Hash, u32, toBytes, wrapConstructor, wrapXOFConstructorWithOpts, isLE, byteSwap32, } from './utils.js';\n// SHA3 (keccak) is based on a new design: basically, the internal state is bigger than output size.\n// It's called a sponge function.\n// Various per round constants calculations\nconst SHA3_PI = [];\nconst SHA3_ROTL = [];\nconst _SHA3_IOTA = [];\nconst _0n = /* @__PURE__ */ BigInt(0);\nconst _1n = /* @__PURE__ */ BigInt(1);\nconst _2n = /* @__PURE__ */ BigInt(2);\nconst _7n = /* @__PURE__ */ BigInt(7);\nconst _256n = /* @__PURE__ */ BigInt(256);\nconst _0x71n = /* @__PURE__ */ BigInt(0x71);\nfor (let round = 0, R = _1n, x = 1, y = 0; round < 24; round++) {\n    // Pi\n    [x, y] = [y, (2 * x + 3 * y) % 5];\n    SHA3_PI.push(2 * (5 * y + x));\n    // Rotational\n    SHA3_ROTL.push((((round + 1) * (round + 2)) / 2) % 64);\n    // Iota\n    let t = _0n;\n    for (let j = 0; j < 7; j++) {\n        R = ((R << _1n) ^ ((R >> _7n) * _0x71n)) % _256n;\n        if (R & _2n)\n            t ^= _1n << ((_1n << /* @__PURE__ */ BigInt(j)) - _1n);\n    }\n    _SHA3_IOTA.push(t);\n}\nconst [SHA3_IOTA_H, SHA3_IOTA_L] = /* @__PURE__ */ split(_SHA3_IOTA, true);\n// Left rotation (without 0, 32, 64)\nconst rotlH = (h, l, s) => (s > 32 ? rotlBH(h, l, s) : rotlSH(h, l, s));\nconst rotlL = (h, l, s) => (s > 32 ? rotlBL(h, l, s) : rotlSL(h, l, s));\n// Same as keccakf1600, but allows to skip some rounds\nexport function keccakP(s, rounds = 24) {\n    const B = new Uint32Array(5 * 2);\n    // NOTE: all indices are x2 since we store state as u32 instead of u64 (bigints to slow in js)\n    for (let round = 24 - rounds; round < 24; round++) {\n        // Theta \n        for (let x = 0; x < 10; x++)\n            B[x] = s[x] ^ s[x + 10] ^ s[x + 20] ^ s[x + 30] ^ s[x + 40];\n        for (let x = 0; x < 10; x += 2) {\n            const idx1 = (x + 8) % 10;\n            const idx0 = (x + 2) % 10;\n            const B0 = B[idx0];\n            const B1 = B[idx0 + 1];\n            const Th = rotlH(B0, B1, 1) ^ B[idx1];\n            const Tl = rotlL(B0, B1, 1) ^ B[idx1 + 1];\n            for (let y = 0; y < 50; y += 10) {\n                s[x + y] ^= Th;\n                s[x + y + 1] ^= Tl;\n            }\n        }\n        // Rho () and Pi ()\n        let curH = s[2];\n        let curL = s[3];\n        for (let t = 0; t < 24; t++) {\n            const shift = SHA3_ROTL[t];\n            const Th = rotlH(curH, curL, shift);\n            const Tl = rotlL(curH, curL, shift);\n            const PI = SHA3_PI[t];\n            curH = s[PI];\n            curL = s[PI + 1];\n            s[PI] = Th;\n            s[PI + 1] = Tl;\n        }\n        // Chi ()\n        for (let y = 0; y < 50; y += 10) {\n            for (let x = 0; x < 10; x++)\n                B[x] = s[y + x];\n            for (let x = 0; x < 10; x++)\n                s[y + x] ^= ~B[(x + 2) % 10] & B[(x + 4) % 10];\n        }\n        // Iota ()\n        s[0] ^= SHA3_IOTA_H[round];\n        s[1] ^= SHA3_IOTA_L[round];\n    }\n    B.fill(0);\n}\nexport class Keccak extends Hash {\n    // NOTE: we accept arguments in bytes instead of bits here.\n    constructor(blockLen, suffix, outputLen, enableXOF = false, rounds = 24) {\n        super();\n        this.blockLen = blockLen;\n        this.suffix = suffix;\n        this.outputLen = outputLen;\n        this.enableXOF = enableXOF;\n        this.rounds = rounds;\n        this.pos = 0;\n        this.posOut = 0;\n        this.finished = false;\n        this.destroyed = false;\n        // Can be passed from user as dkLen\n        number(outputLen);\n        // 1600 = 5x5 matrix of 64bit.  1600 bits === 200 bytes\n        if (0 >= this.blockLen || this.blockLen >= 200)\n            throw new Error('Sha3 supports only keccak-f1600 function');\n        this.state = new Uint8Array(200);\n        this.state32 = u32(this.state);\n    }\n    keccak() {\n        if (!isLE)\n            byteSwap32(this.state32);\n        keccakP(this.state32, this.rounds);\n        if (!isLE)\n            byteSwap32(this.state32);\n        this.posOut = 0;\n        this.pos = 0;\n    }\n    update(data) {\n        exists(this);\n        const { blockLen, state } = this;\n        data = toBytes(data);\n        const len = data.length;\n        for (let pos = 0; pos < len;) {\n            const take = Math.min(blockLen - this.pos, len - pos);\n            for (let i = 0; i < take; i++)\n                state[this.pos++] ^= data[pos++];\n            if (this.pos === blockLen)\n                this.keccak();\n        }\n        return this;\n    }\n    finish() {\n        if (this.finished)\n            return;\n        this.finished = true;\n        const { state, suffix, pos, blockLen } = this;\n        // Do the padding\n        state[pos] ^= suffix;\n        if ((suffix & 0x80) !== 0 && pos === blockLen - 1)\n            this.keccak();\n        state[blockLen - 1] ^= 0x80;\n        this.keccak();\n    }\n    writeInto(out) {\n        exists(this, false);\n        bytes(out);\n        this.finish();\n        const bufferOut = this.state;\n        const { blockLen } = this;\n        for (let pos = 0, len = out.length; pos < len;) {\n            if (this.posOut >= blockLen)\n                this.keccak();\n            const take = Math.min(blockLen - this.posOut, len - pos);\n            out.set(bufferOut.subarray(this.posOut, this.posOut + take), pos);\n            this.posOut += take;\n            pos += take;\n        }\n        return out;\n    }\n    xofInto(out) {\n        // Sha3/Keccak usage with XOF is probably mistake, only SHAKE instances can do XOF\n        if (!this.enableXOF)\n            throw new Error('XOF is not possible for this instance');\n        return this.writeInto(out);\n    }\n    xof(bytes) {\n        number(bytes);\n        return this.xofInto(new Uint8Array(bytes));\n    }\n    digestInto(out) {\n        output(out, this);\n        if (this.finished)\n            throw new Error('digest() was already called');\n        this.writeInto(out);\n        this.destroy();\n        return out;\n    }\n    digest() {\n        return this.digestInto(new Uint8Array(this.outputLen));\n    }\n    destroy() {\n        this.destroyed = true;\n        this.state.fill(0);\n    }\n    _cloneInto(to) {\n        const { blockLen, suffix, outputLen, rounds, enableXOF } = this;\n        to || (to = new Keccak(blockLen, suffix, outputLen, enableXOF, rounds));\n        to.state32.set(this.state32);\n        to.pos = this.pos;\n        to.posOut = this.posOut;\n        to.finished = this.finished;\n        to.rounds = rounds;\n        // Suffix can change in cSHAKE\n        to.suffix = suffix;\n        to.outputLen = outputLen;\n        to.enableXOF = enableXOF;\n        to.destroyed = this.destroyed;\n        return to;\n    }\n}\nconst gen = (suffix, blockLen, outputLen) => wrapConstructor(() => new Keccak(blockLen, suffix, outputLen));\nexport const sha3_224 = /* @__PURE__ */ gen(0x06, 144, 224 / 8);\n/**\n * SHA3-256 hash function\n * @param message - that would be hashed\n */\nexport const sha3_256 = /* @__PURE__ */ gen(0x06, 136, 256 / 8);\nexport const sha3_384 = /* @__PURE__ */ gen(0x06, 104, 384 / 8);\nexport const sha3_512 = /* @__PURE__ */ gen(0x06, 72, 512 / 8);\nexport const keccak_224 = /* @__PURE__ */ gen(0x01, 144, 224 / 8);\n/**\n * keccak-256 hash function. Different from SHA3-256.\n * @param message - that would be hashed\n */\nexport const keccak_256 = /* @__PURE__ */ gen(0x01, 136, 256 / 8);\nexport const keccak_384 = /* @__PURE__ */ gen(0x01, 104, 384 / 8);\nexport const keccak_512 = /* @__PURE__ */ gen(0x01, 72, 512 / 8);\nconst genShake = (suffix, blockLen, outputLen) => wrapXOFConstructorWithOpts((opts = {}) => new Keccak(blockLen, suffix, opts.dkLen === undefined ? outputLen : opts.dkLen, true));\nexport const shake128 = /* @__PURE__ */ genShake(0x1f, 168, 128 / 8);\nexport const shake256 = /* @__PURE__ */ genShake(0x1f, 136, 256 / 8);\n//# sourceMappingURL=sha3.js.map","import { keccak_256 } from '@noble/hashes/sha3';\nimport { isHex } from '../data/isHex.js';\nimport { toBytes } from '../encoding/toBytes.js';\nimport { toHex } from '../encoding/toHex.js';\nexport function keccak256(value, to_) {\n    const to = to_ || 'hex';\n    const bytes = keccak_256(isHex(value, { strict: false }) ? toBytes(value) : value);\n    if (to === 'bytes')\n        return bytes;\n    return toHex(bytes);\n}\n//# sourceMappingURL=keccak256.js.map","import { toBytes } from '../encoding/toBytes.js';\nimport { keccak256 } from './keccak256.js';\nconst hash = (value) => keccak256(toBytes(value));\nexport function hashSignature(sig) {\n    return hash(sig);\n}\n//# sourceMappingURL=hashSignature.js.map","import { BaseError } from '../../errors/base.js';\nexport function normalizeSignature(signature) {\n    let active = true;\n    let current = '';\n    let level = 0;\n    let result = '';\n    let valid = false;\n    for (let i = 0; i < signature.length; i++) {\n        const char = signature[i];\n        // If the character is a separator, we want to reactivate.\n        if (['(', ')', ','].includes(char))\n            active = true;\n        // If the character is a \"level\" token, we want to increment/decrement.\n        if (char === '(')\n            level++;\n        if (char === ')')\n            level--;\n        // If we aren't active, we don't want to mutate the result.\n        if (!active)\n            continue;\n        // If level === 0, we are at the definition level.\n        if (level === 0) {\n            if (char === ' ' && ['event', 'function', ''].includes(result))\n                result = '';\n            else {\n                result += char;\n                // If we are at the end of the definition, we must be finished.\n                if (char === ')') {\n                    valid = true;\n                    break;\n                }\n            }\n            continue;\n        }\n        // Ignore spaces\n        if (char === ' ') {\n            // If the previous character is a separator, and the current section isn't empty, we want to deactivate.\n            if (signature[i - 1] !== ',' && current !== ',' && current !== ',(') {\n                current = '';\n                active = false;\n            }\n            continue;\n        }\n        result += char;\n        current += char;\n    }\n    if (!valid)\n        throw new BaseError('Unable to normalize signature.');\n    return result;\n}\n//# sourceMappingURL=normalizeSignature.js.map","import { formatAbiItem } from 'abitype';\nimport { normalizeSignature, } from './normalizeSignature.js';\n/**\n * Returns the signature for a given function or event definition.\n *\n * @example\n * const signature = toSignature('function ownerOf(uint256 tokenId)')\n * // 'ownerOf(uint256)'\n *\n * @example\n * const signature_3 = toSignature({\n *   name: 'ownerOf',\n *   type: 'function',\n *   inputs: [{ name: 'tokenId', type: 'uint256' }],\n *   outputs: [],\n *   stateMutability: 'view',\n * })\n * // 'ownerOf(uint256)'\n */\nexport const toSignature = (def) => {\n    const def_ = (() => {\n        if (typeof def === 'string')\n            return def;\n        return formatAbiItem(def);\n    })();\n    return normalizeSignature(def_);\n};\n//# sourceMappingURL=toSignature.js.map","import { hashSignature } from './hashSignature.js';\nimport { toSignature } from './toSignature.js';\n/**\n * Returns the hash (of the function/event signature) for a given event or function definition.\n */\nexport function toSignatureHash(fn) {\n    return hashSignature(toSignature(fn));\n}\n//# sourceMappingURL=toSignatureHash.js.map","import { toSignatureHash, } from './toSignatureHash.js';\n/**\n * Returns the event selector for a given event definition.\n *\n * @example\n * const selector = toEventSelector('Transfer(address indexed from, address indexed to, uint256 amount)')\n * // 0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef\n */\nexport const toEventSelector = toSignatureHash;\n//# sourceMappingURL=toEventSelector.js.map","import { BaseError } from './base.js';\nexport class InvalidAddressError extends BaseError {\n    constructor({ address }) {\n        super(`Address \"${address}\" is invalid.`, {\n            metaMessages: [\n                '- Address must be a hex value of 20 bytes (40 hex characters).',\n                '- Address must match its checksum counterpart.',\n            ],\n            name: 'InvalidAddressError',\n        });\n    }\n}\n//# sourceMappingURL=address.js.map","/**\n * Map with a LRU (Least recently used) policy.\n *\n * @link https://en.wikipedia.org/wiki/Cache_replacement_policies#LRU\n */\nexport class LruMap extends Map {\n    constructor(size) {\n        super();\n        Object.defineProperty(this, \"maxSize\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.maxSize = size;\n    }\n    set(key, value) {\n        super.set(key, value);\n        if (this.maxSize && this.size > this.maxSize)\n            this.delete(this.keys().next().value);\n        return this;\n    }\n}\n//# sourceMappingURL=lru.js.map","import { InvalidAddressError } from '../../errors/address.js';\nimport { stringToBytes, } from '../encoding/toBytes.js';\nimport { keccak256 } from '../hash/keccak256.js';\nimport { LruMap } from '../lru.js';\nimport { isAddress } from './isAddress.js';\nconst checksumAddressCache = /*#__PURE__*/ new LruMap(8192);\nexport function checksumAddress(address_, \n/**\n * Warning: EIP-1191 checksum addresses are generally not backwards compatible with the\n * wider Ethereum ecosystem, meaning it will break when validated against an application/tool\n * that relies on EIP-55 checksum encoding (checksum without chainId).\n *\n * It is highly recommended to not use this feature unless you\n * know what you are doing.\n *\n * See more: https://github.com/ethereum/EIPs/issues/1121\n */\nchainId) {\n    if (checksumAddressCache.has(`${address_}.${chainId}`))\n        return checksumAddressCache.get(`${address_}.${chainId}`);\n    const hexAddress = chainId\n        ? `${chainId}${address_.toLowerCase()}`\n        : address_.substring(2).toLowerCase();\n    const hash = keccak256(stringToBytes(hexAddress), 'bytes');\n    const address = (chainId ? hexAddress.substring(`${chainId}0x`.length) : hexAddress).split('');\n    for (let i = 0; i < 40; i += 2) {\n        if (hash[i >> 1] >> 4 >= 8 && address[i]) {\n            address[i] = address[i].toUpperCase();\n        }\n        if ((hash[i >> 1] & 0x0f) >= 8 && address[i + 1]) {\n            address[i + 1] = address[i + 1].toUpperCase();\n        }\n    }\n    const result = `0x${address.join('')}`;\n    checksumAddressCache.set(`${address_}.${chainId}`, result);\n    return result;\n}\nexport function getAddress(address, \n/**\n * Warning: EIP-1191 checksum addresses are generally not backwards compatible with the\n * wider Ethereum ecosystem, meaning it will break when validated against an application/tool\n * that relies on EIP-55 checksum encoding (checksum without chainId).\n *\n * It is highly recommended to not use this feature unless you\n * know what you are doing.\n *\n * See more: https://github.com/ethereum/EIPs/issues/1121\n */\nchainId) {\n    if (!isAddress(address, { strict: false }))\n        throw new InvalidAddressError({ address });\n    return checksumAddress(address, chainId);\n}\n//# sourceMappingURL=getAddress.js.map","import { LruMap } from '../lru.js';\nimport { checksumAddress } from './getAddress.js';\nconst addressRegex = /^0x[a-fA-F0-9]{40}$/;\n/** @internal */\nexport const isAddressCache = /*#__PURE__*/ new LruMap(8192);\nexport function isAddress(address, options) {\n    const { strict = true } = options ?? {};\n    const cacheKey = `${address}.${strict}`;\n    if (isAddressCache.has(cacheKey))\n        return isAddressCache.get(cacheKey);\n    const result = (() => {\n        if (!addressRegex.test(address))\n            return false;\n        if (address.toLowerCase() === address)\n            return true;\n        if (strict)\n            return checksumAddress(address) === address;\n        return true;\n    })();\n    isAddressCache.set(cacheKey, result);\n    return result;\n}\n//# sourceMappingURL=isAddress.js.map","export function concat(values) {\n    if (typeof values[0] === 'string')\n        return concatHex(values);\n    return concatBytes(values);\n}\nexport function concatBytes(values) {\n    let length = 0;\n    for (const arr of values) {\n        length += arr.length;\n    }\n    const result = new Uint8Array(length);\n    let offset = 0;\n    for (const arr of values) {\n        result.set(arr, offset);\n        offset += arr.length;\n    }\n    return result;\n}\nexport function concatHex(values) {\n    return `0x${values.reduce((acc, x) => acc + x.replace('0x', ''), '')}`;\n}\n//# sourceMappingURL=concat.js.map","import { SliceOffsetOutOfBoundsError, } from '../../errors/data.js';\nimport { isHex } from './isHex.js';\nimport { size } from './size.js';\n/**\n * @description Returns a section of the hex or byte array given a start/end bytes offset.\n *\n * @param value The hex or byte array to slice.\n * @param start The start offset (in bytes).\n * @param end The end offset (in bytes).\n */\nexport function slice(value, start, end, { strict } = {}) {\n    if (isHex(value, { strict: false }))\n        return sliceHex(value, start, end, {\n            strict,\n        });\n    return sliceBytes(value, start, end, {\n        strict,\n    });\n}\nfunction assertStartOffset(value, start) {\n    if (typeof start === 'number' && start > 0 && start > size(value) - 1)\n        throw new SliceOffsetOutOfBoundsError({\n            offset: start,\n            position: 'start',\n            size: size(value),\n        });\n}\nfunction assertEndOffset(value, start, end) {\n    if (typeof start === 'number' &&\n        typeof end === 'number' &&\n        size(value) !== end - start) {\n        throw new SliceOffsetOutOfBoundsError({\n            offset: end,\n            position: 'end',\n            size: size(value),\n        });\n    }\n}\n/**\n * @description Returns a section of the byte array given a start/end bytes offset.\n *\n * @param value The byte array to slice.\n * @param start The start offset (in bytes).\n * @param end The end offset (in bytes).\n */\nexport function sliceBytes(value_, start, end, { strict } = {}) {\n    assertStartOffset(value_, start);\n    const value = value_.slice(start, end);\n    if (strict)\n        assertEndOffset(value, start, end);\n    return value;\n}\n/**\n * @description Returns a section of the hex value given a start/end bytes offset.\n *\n * @param value The hex value to slice.\n * @param start The start offset (in bytes).\n * @param end The end offset (in bytes).\n */\nexport function sliceHex(value_, start, end, { strict } = {}) {\n    assertStartOffset(value_, start);\n    const value = `0x${value_\n        .replace('0x', '')\n        .slice((start ?? 0) * 2, (end ?? value_.length) * 2)}`;\n    if (strict)\n        assertEndOffset(value, start, end);\n    return value;\n}\n//# sourceMappingURL=slice.js.map","import { AbiEncodingArrayLengthMismatchError, AbiEncodingBytesSizeMismatchError, AbiEncodingLengthMismatchError, InvalidAbiEncodingTypeError, InvalidArrayError, } from '../../errors/abi.js';\nimport { InvalidAddressError, } from '../../errors/address.js';\nimport { BaseError } from '../../errors/base.js';\nimport { isAddress } from '../address/isAddress.js';\nimport { concat } from '../data/concat.js';\nimport { padHex } from '../data/pad.js';\nimport { size } from '../data/size.js';\nimport { slice } from '../data/slice.js';\nimport { boolToHex, numberToHex, stringToHex, } from '../encoding/toHex.js';\n/**\n * @description Encodes a list of primitive values into an ABI-encoded hex value.\n *\n * - Docs: https://viem.sh/docs/abi/encodeAbiParameters#encodeabiparameters\n *\n *   Generates ABI encoded data using the [ABI specification](https://docs.soliditylang.org/en/latest/abi-spec), given a set of ABI parameters (inputs/outputs) and their corresponding values.\n *\n * @param params - a set of ABI Parameters (params), that can be in the shape of the inputs or outputs attribute of an ABI Item.\n * @param values - a set of values (values) that correspond to the given params.\n * @example\n * ```typescript\n * import { encodeAbiParameters } from 'viem'\n *\n * const encodedData = encodeAbiParameters(\n *   [\n *     { name: 'x', type: 'string' },\n *     { name: 'y', type: 'uint' },\n *     { name: 'z', type: 'bool' }\n *   ],\n *   ['wagmi', 420n, true]\n * )\n * ```\n *\n * You can also pass in Human Readable parameters with the parseAbiParameters utility.\n *\n * @example\n * ```typescript\n * import { encodeAbiParameters, parseAbiParameters } from 'viem'\n *\n * const encodedData = encodeAbiParameters(\n *   parseAbiParameters('string x, uint y, bool z'),\n *   ['wagmi', 420n, true]\n * )\n * ```\n */\nexport function encodeAbiParameters(params, values) {\n    if (params.length !== values.length)\n        throw new AbiEncodingLengthMismatchError({\n            expectedLength: params.length,\n            givenLength: values.length,\n        });\n    // Prepare the parameters to determine dynamic types to encode.\n    const preparedParams = prepareParams({\n        params: params,\n        values: values,\n    });\n    const data = encodeParams(preparedParams);\n    if (data.length === 0)\n        return '0x';\n    return data;\n}\nfunction prepareParams({ params, values, }) {\n    const preparedParams = [];\n    for (let i = 0; i < params.length; i++) {\n        preparedParams.push(prepareParam({ param: params[i], value: values[i] }));\n    }\n    return preparedParams;\n}\nfunction prepareParam({ param, value, }) {\n    const arrayComponents = getArrayComponents(param.type);\n    if (arrayComponents) {\n        const [length, type] = arrayComponents;\n        return encodeArray(value, { length, param: { ...param, type } });\n    }\n    if (param.type === 'tuple') {\n        return encodeTuple(value, {\n            param: param,\n        });\n    }\n    if (param.type === 'address') {\n        return encodeAddress(value);\n    }\n    if (param.type === 'bool') {\n        return encodeBool(value);\n    }\n    if (param.type.startsWith('uint') || param.type.startsWith('int')) {\n        const signed = param.type.startsWith('int');\n        return encodeNumber(value, { signed });\n    }\n    if (param.type.startsWith('bytes')) {\n        return encodeBytes(value, { param });\n    }\n    if (param.type === 'string') {\n        return encodeString(value);\n    }\n    throw new InvalidAbiEncodingTypeError(param.type, {\n        docsPath: '/docs/contract/encodeAbiParameters',\n    });\n}\nfunction encodeParams(preparedParams) {\n    // 1. Compute the size of the static part of the parameters.\n    let staticSize = 0;\n    for (let i = 0; i < preparedParams.length; i++) {\n        const { dynamic, encoded } = preparedParams[i];\n        if (dynamic)\n            staticSize += 32;\n        else\n            staticSize += size(encoded);\n    }\n    // 2. Split the parameters into static and dynamic parts.\n    const staticParams = [];\n    const dynamicParams = [];\n    let dynamicSize = 0;\n    for (let i = 0; i < preparedParams.length; i++) {\n        const { dynamic, encoded } = preparedParams[i];\n        if (dynamic) {\n            staticParams.push(numberToHex(staticSize + dynamicSize, { size: 32 }));\n            dynamicParams.push(encoded);\n            dynamicSize += size(encoded);\n        }\n        else {\n            staticParams.push(encoded);\n        }\n    }\n    // 3. Concatenate static and dynamic parts.\n    return concat([...staticParams, ...dynamicParams]);\n}\nfunction encodeAddress(value) {\n    if (!isAddress(value))\n        throw new InvalidAddressError({ address: value });\n    return { dynamic: false, encoded: padHex(value.toLowerCase()) };\n}\nfunction encodeArray(value, { length, param, }) {\n    const dynamic = length === null;\n    if (!Array.isArray(value))\n        throw new InvalidArrayError(value);\n    if (!dynamic && value.length !== length)\n        throw new AbiEncodingArrayLengthMismatchError({\n            expectedLength: length,\n            givenLength: value.length,\n            type: `${param.type}[${length}]`,\n        });\n    let dynamicChild = false;\n    const preparedParams = [];\n    for (let i = 0; i < value.length; i++) {\n        const preparedParam = prepareParam({ param, value: value[i] });\n        if (preparedParam.dynamic)\n            dynamicChild = true;\n        preparedParams.push(preparedParam);\n    }\n    if (dynamic || dynamicChild) {\n        const data = encodeParams(preparedParams);\n        if (dynamic) {\n            const length = numberToHex(preparedParams.length, { size: 32 });\n            return {\n                dynamic: true,\n                encoded: preparedParams.length > 0 ? concat([length, data]) : length,\n            };\n        }\n        if (dynamicChild)\n            return { dynamic: true, encoded: data };\n    }\n    return {\n        dynamic: false,\n        encoded: concat(preparedParams.map(({ encoded }) => encoded)),\n    };\n}\nfunction encodeBytes(value, { param }) {\n    const [, paramSize] = param.type.split('bytes');\n    const bytesSize = size(value);\n    if (!paramSize) {\n        let value_ = value;\n        // If the size is not divisible by 32 bytes, pad the end\n        // with empty bytes to the ceiling 32 bytes.\n        if (bytesSize % 32 !== 0)\n            value_ = padHex(value_, {\n                dir: 'right',\n                size: Math.ceil((value.length - 2) / 2 / 32) * 32,\n            });\n        return {\n            dynamic: true,\n            encoded: concat([padHex(numberToHex(bytesSize, { size: 32 })), value_]),\n        };\n    }\n    if (bytesSize !== Number.parseInt(paramSize))\n        throw new AbiEncodingBytesSizeMismatchError({\n            expectedSize: Number.parseInt(paramSize),\n            value,\n        });\n    return { dynamic: false, encoded: padHex(value, { dir: 'right' }) };\n}\nfunction encodeBool(value) {\n    if (typeof value !== 'boolean')\n        throw new BaseError(`Invalid boolean value: \"${value}\" (type: ${typeof value}). Expected: \\`true\\` or \\`false\\`.`);\n    return { dynamic: false, encoded: padHex(boolToHex(value)) };\n}\nfunction encodeNumber(value, { signed }) {\n    return {\n        dynamic: false,\n        encoded: numberToHex(value, {\n            size: 32,\n            signed,\n        }),\n    };\n}\nfunction encodeString(value) {\n    const hexValue = stringToHex(value);\n    const partsLength = Math.ceil(size(hexValue) / 32);\n    const parts = [];\n    for (let i = 0; i < partsLength; i++) {\n        parts.push(padHex(slice(hexValue, i * 32, (i + 1) * 32), {\n            dir: 'right',\n        }));\n    }\n    return {\n        dynamic: true,\n        encoded: concat([\n            padHex(numberToHex(size(hexValue), { size: 32 })),\n            ...parts,\n        ]),\n    };\n}\nfunction encodeTuple(value, { param }) {\n    let dynamic = false;\n    const preparedParams = [];\n    for (let i = 0; i < param.components.length; i++) {\n        const param_ = param.components[i];\n        const index = Array.isArray(value) ? i : param_.name;\n        const preparedParam = prepareParam({\n            param: param_,\n            value: value[index],\n        });\n        preparedParams.push(preparedParam);\n        if (preparedParam.dynamic)\n            dynamic = true;\n    }\n    return {\n        dynamic,\n        encoded: dynamic\n            ? encodeParams(preparedParams)\n            : concat(preparedParams.map(({ encoded }) => encoded)),\n    };\n}\nexport function getArrayComponents(type) {\n    const matches = type.match(/^(.*)\\[(\\d+)?\\]$/);\n    return matches\n        ? // Return `null` if the array is dynamic.\n            [matches[2] ? Number(matches[2]) : null, matches[1]]\n        : undefined;\n}\n//# sourceMappingURL=encodeAbiParameters.js.map","import { slice } from '../data/slice.js';\nimport { toSignatureHash, } from './toSignatureHash.js';\n/**\n * Returns the function selector for a given function definition.\n *\n * @example\n * const selector = toFunctionSelector('function ownerOf(uint256 tokenId)')\n * // 0x6352211e\n */\nexport const toFunctionSelector = (fn) => slice(toSignatureHash(fn), 0, 4);\n//# sourceMappingURL=toFunctionSelector.js.map","import { AbiItemAmbiguityError, } from '../../errors/abi.js';\nimport { isHex } from '../../utils/data/isHex.js';\nimport { isAddress } from '../address/isAddress.js';\nimport { toEventSelector } from '../hash/toEventSelector.js';\nimport { toFunctionSelector, } from '../hash/toFunctionSelector.js';\nexport function getAbiItem(parameters) {\n    const { abi, args = [], name } = parameters;\n    const isSelector = isHex(name, { strict: false });\n    const abiItems = abi.filter((abiItem) => {\n        if (isSelector) {\n            if (abiItem.type === 'function')\n                return toFunctionSelector(abiItem) === name;\n            if (abiItem.type === 'event')\n                return toEventSelector(abiItem) === name;\n            return false;\n        }\n        return 'name' in abiItem && abiItem.name === name;\n    });\n    if (abiItems.length === 0)\n        return undefined;\n    if (abiItems.length === 1)\n        return abiItems[0];\n    let matchedAbiItem = undefined;\n    for (const abiItem of abiItems) {\n        if (!('inputs' in abiItem))\n            continue;\n        if (!args || args.length === 0) {\n            if (!abiItem.inputs || abiItem.inputs.length === 0)\n                return abiItem;\n            continue;\n        }\n        if (!abiItem.inputs)\n            continue;\n        if (abiItem.inputs.length === 0)\n            continue;\n        if (abiItem.inputs.length !== args.length)\n            continue;\n        const matched = args.every((arg, index) => {\n            const abiParameter = 'inputs' in abiItem && abiItem.inputs[index];\n            if (!abiParameter)\n                return false;\n            return isArgOfType(arg, abiParameter);\n        });\n        if (matched) {\n            // Check for ambiguity against already matched parameters (e.g. `address` vs `bytes20`).\n            if (matchedAbiItem &&\n                'inputs' in matchedAbiItem &&\n                matchedAbiItem.inputs) {\n                const ambiguousTypes = getAmbiguousTypes(abiItem.inputs, matchedAbiItem.inputs, args);\n                if (ambiguousTypes)\n                    throw new AbiItemAmbiguityError({\n                        abiItem,\n                        type: ambiguousTypes[0],\n                    }, {\n                        abiItem: matchedAbiItem,\n                        type: ambiguousTypes[1],\n                    });\n            }\n            matchedAbiItem = abiItem;\n        }\n    }\n    if (matchedAbiItem)\n        return matchedAbiItem;\n    return abiItems[0];\n}\n/** @internal */\nexport function isArgOfType(arg, abiParameter) {\n    const argType = typeof arg;\n    const abiParameterType = abiParameter.type;\n    switch (abiParameterType) {\n        case 'address':\n            return isAddress(arg, { strict: false });\n        case 'bool':\n            return argType === 'boolean';\n        case 'function':\n            return argType === 'string';\n        case 'string':\n            return argType === 'string';\n        default: {\n            if (abiParameterType === 'tuple' && 'components' in abiParameter)\n                return Object.values(abiParameter.components).every((component, index) => {\n                    return isArgOfType(Object.values(arg)[index], component);\n                });\n            // `(u)int<M>`: (un)signed integer type of `M` bits, `0 < M <= 256`, `M % 8 == 0`\n            // https://regexr.com/6v8hp\n            if (/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(abiParameterType))\n                return argType === 'number' || argType === 'bigint';\n            // `bytes<M>`: binary type of `M` bytes, `0 < M <= 32`\n            // https://regexr.com/6va55\n            if (/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(abiParameterType))\n                return argType === 'string' || arg instanceof Uint8Array;\n            // fixed-length (`<type>[M]`) and dynamic (`<type>[]`) arrays\n            // https://regexr.com/6va6i\n            if (/[a-z]+[1-9]{0,3}(\\[[0-9]{0,}\\])+$/.test(abiParameterType)) {\n                return (Array.isArray(arg) &&\n                    arg.every((x) => isArgOfType(x, {\n                        ...abiParameter,\n                        // Pop off `[]` or `[M]` from end of type\n                        type: abiParameterType.replace(/(\\[[0-9]{0,}\\])$/, ''),\n                    })));\n            }\n            return false;\n        }\n    }\n}\n/** @internal */\nexport function getAmbiguousTypes(sourceParameters, targetParameters, args) {\n    for (const parameterIndex in sourceParameters) {\n        const sourceParameter = sourceParameters[parameterIndex];\n        const targetParameter = targetParameters[parameterIndex];\n        if (sourceParameter.type === 'tuple' &&\n            targetParameter.type === 'tuple' &&\n            'components' in sourceParameter &&\n            'components' in targetParameter)\n            return getAmbiguousTypes(sourceParameter.components, targetParameter.components, args[parameterIndex]);\n        const types = [sourceParameter.type, targetParameter.type];\n        const ambiguous = (() => {\n            if (types.includes('address') && types.includes('bytes20'))\n                return true;\n            if (types.includes('address') && types.includes('string'))\n                return isAddress(args[parameterIndex], { strict: false });\n            if (types.includes('address') && types.includes('bytes'))\n                return isAddress(args[parameterIndex], { strict: false });\n            return false;\n        })();\n        if (ambiguous)\n            return types;\n    }\n    return;\n}\n//# sourceMappingURL=getAbiItem.js.map","import { AbiFunctionNotFoundError, } from '../../errors/abi.js';\nimport { toFunctionSelector, } from '../hash/toFunctionSelector.js';\nimport { formatAbiItem } from './formatAbiItem.js';\nimport { getAbiItem } from './getAbiItem.js';\nconst docsPath = '/docs/contract/encodeFunctionData';\nexport function prepareEncodeFunctionData(parameters) {\n    const { abi, args, functionName } = parameters;\n    let abiItem = abi[0];\n    if (functionName) {\n        const item = getAbiItem({\n            abi,\n            args,\n            name: functionName,\n        });\n        if (!item)\n            throw new AbiFunctionNotFoundError(functionName, { docsPath });\n        abiItem = item;\n    }\n    if (abiItem.type !== 'function')\n        throw new AbiFunctionNotFoundError(undefined, { docsPath });\n    return {\n        abi: [abiItem],\n        functionName: toFunctionSelector(formatAbiItem(abiItem)),\n    };\n}\n//# sourceMappingURL=prepareEncodeFunctionData.js.map","import { concatHex } from '../data/concat.js';\nimport { encodeAbiParameters, } from './encodeAbiParameters.js';\nimport { prepareEncodeFunctionData } from './prepareEncodeFunctionData.js';\nexport function encodeFunctionData(parameters) {\n    const { args } = parameters;\n    const { abi, functionName } = (() => {\n        if (parameters.abi.length === 1 &&\n            parameters.functionName?.startsWith('0x'))\n            return parameters;\n        return prepareEncodeFunctionData(parameters);\n    })();\n    const abiItem = abi[0];\n    const signature = functionName;\n    const data = 'inputs' in abiItem && abiItem.inputs\n        ? encodeAbiParameters(abiItem.inputs, args ?? [])\n        : undefined;\n    return concatHex([signature, data ?? '0x']);\n}\n//# sourceMappingURL=encodeFunctionData.js.map","export const arrayRegex = /^(.*)\\[([0-9]*)\\]$/;\n// `bytes<M>`: binary type of `M` bytes, `0 < M <= 32`\n// https://regexr.com/6va55\nexport const bytesRegex = /^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/;\n// `(u)int<M>`: (un)signed integer type of `M` bits, `0 < M <= 256`, `M % 8 == 0`\n// https://regexr.com/6v8hp\nexport const integerRegex = /^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;\n//# sourceMappingURL=regex.js.map","// Implementation forked and adapted from https://github.com/MetaMask/eth-sig-util/blob/main/src/sign-typed-data.ts\nimport { encodeAbiParameters, } from '../abi/encodeAbiParameters.js';\nimport { concat } from '../data/concat.js';\nimport { toHex } from '../encoding/toHex.js';\nimport { keccak256 } from '../hash/keccak256.js';\nimport { getTypesForEIP712Domain, validateTypedData, } from '../typedData.js';\nexport function hashTypedData(parameters) {\n    const { domain = {}, message, primaryType, } = parameters;\n    const types = {\n        EIP712Domain: getTypesForEIP712Domain({ domain }),\n        ...parameters.types,\n    };\n    // Need to do a runtime validation check on addresses, byte ranges, integer ranges, etc\n    // as we can't statically check this with TypeScript.\n    validateTypedData({\n        domain,\n        message,\n        primaryType,\n        types,\n    });\n    const parts = ['0x1901'];\n    if (domain)\n        parts.push(hashDomain({\n            domain,\n            types: types,\n        }));\n    if (primaryType !== 'EIP712Domain')\n        parts.push(hashStruct({\n            data: message,\n            primaryType,\n            types: types,\n        }));\n    return keccak256(concat(parts));\n}\nexport function hashDomain({ domain, types, }) {\n    return hashStruct({\n        data: domain,\n        primaryType: 'EIP712Domain',\n        types,\n    });\n}\nexport function hashStruct({ data, primaryType, types, }) {\n    const encoded = encodeData({\n        data,\n        primaryType,\n        types,\n    });\n    return keccak256(encoded);\n}\nfunction encodeData({ data, primaryType, types, }) {\n    const encodedTypes = [{ type: 'bytes32' }];\n    const encodedValues = [hashType({ primaryType, types })];\n    for (const field of types[primaryType]) {\n        const [type, value] = encodeField({\n            types,\n            name: field.name,\n            type: field.type,\n            value: data[field.name],\n        });\n        encodedTypes.push(type);\n        encodedValues.push(value);\n    }\n    return encodeAbiParameters(encodedTypes, encodedValues);\n}\nfunction hashType({ primaryType, types, }) {\n    const encodedHashType = toHex(encodeType({ primaryType, types }));\n    return keccak256(encodedHashType);\n}\nexport function encodeType({ primaryType, types, }) {\n    let result = '';\n    const unsortedDeps = findTypeDependencies({ primaryType, types });\n    unsortedDeps.delete(primaryType);\n    const deps = [primaryType, ...Array.from(unsortedDeps).sort()];\n    for (const type of deps) {\n        result += `${type}(${types[type]\n            .map(({ name, type: t }) => `${t} ${name}`)\n            .join(',')})`;\n    }\n    return result;\n}\nfunction findTypeDependencies({ primaryType: primaryType_, types, }, results = new Set()) {\n    const match = primaryType_.match(/^\\w*/u);\n    const primaryType = match?.[0];\n    if (results.has(primaryType) || types[primaryType] === undefined) {\n        return results;\n    }\n    results.add(primaryType);\n    for (const field of types[primaryType]) {\n        findTypeDependencies({ primaryType: field.type, types }, results);\n    }\n    return results;\n}\nfunction encodeField({ types, name, type, value, }) {\n    if (types[type] !== undefined) {\n        return [\n            { type: 'bytes32' },\n            keccak256(encodeData({ data: value, primaryType: type, types })),\n        ];\n    }\n    if (type === 'bytes') {\n        const prepend = value.length % 2 ? '0' : '';\n        value = `0x${prepend + value.slice(2)}`;\n        return [{ type: 'bytes32' }, keccak256(value)];\n    }\n    if (type === 'string')\n        return [{ type: 'bytes32' }, keccak256(toHex(value))];\n    if (type.lastIndexOf(']') === type.length - 1) {\n        const parsedType = type.slice(0, type.lastIndexOf('['));\n        const typeValuePairs = value.map((item) => encodeField({\n            name,\n            type: parsedType,\n            types,\n            value: item,\n        }));\n        return [\n            { type: 'bytes32' },\n            keccak256(encodeAbiParameters(typeValuePairs.map(([t]) => t), typeValuePairs.map(([, v]) => v))),\n        ];\n    }\n    return [{ type }, value];\n}\n//# sourceMappingURL=hashTypedData.js.map","import { BytesSizeMismatchError } from '../errors/abi.js';\nimport { InvalidAddressError } from '../errors/address.js';\nimport { isAddress } from './address/isAddress.js';\nimport { size } from './data/size.js';\nimport { numberToHex } from './encoding/toHex.js';\nimport { bytesRegex, integerRegex } from './regex.js';\nimport { hashDomain, } from './signature/hashTypedData.js';\nimport { stringify } from './stringify.js';\nexport function serializeTypedData(parameters) {\n    const { domain: domain_, message: message_, primaryType, types, } = parameters;\n    const normalizeData = (struct, data_) => {\n        const data = { ...data_ };\n        for (const param of struct) {\n            const { name, type } = param;\n            if (type === 'address')\n                data[name] = data[name].toLowerCase();\n        }\n        return data;\n    };\n    const domain = (() => {\n        if (!types.EIP712Domain)\n            return {};\n        if (!domain_)\n            return {};\n        return normalizeData(types.EIP712Domain, domain_);\n    })();\n    const message = (() => {\n        if (primaryType === 'EIP712Domain')\n            return undefined;\n        return normalizeData(types[primaryType], message_);\n    })();\n    return stringify({ domain, message, primaryType, types });\n}\nexport function validateTypedData(parameters) {\n    const { domain, message, primaryType, types } = parameters;\n    const validateData = (struct, data) => {\n        for (const param of struct) {\n            const { name, type } = param;\n            const value = data[name];\n            const integerMatch = type.match(integerRegex);\n            if (integerMatch &&\n                (typeof value === 'number' || typeof value === 'bigint')) {\n                const [_type, base, size_] = integerMatch;\n                // If number cannot be cast to a sized hex value, it is out of range\n                // and will throw.\n                numberToHex(value, {\n                    signed: base === 'int',\n                    size: Number.parseInt(size_) / 8,\n                });\n            }\n            if (type === 'address' && typeof value === 'string' && !isAddress(value))\n                throw new InvalidAddressError({ address: value });\n            const bytesMatch = type.match(bytesRegex);\n            if (bytesMatch) {\n                const [_type, size_] = bytesMatch;\n                if (size_ && size(value) !== Number.parseInt(size_))\n                    throw new BytesSizeMismatchError({\n                        expectedSize: Number.parseInt(size_),\n                        givenSize: size(value),\n                    });\n            }\n            const struct = types[type];\n            if (struct)\n                validateData(struct, value);\n        }\n    };\n    // Validate domain types.\n    if (types.EIP712Domain && domain)\n        validateData(types.EIP712Domain, domain);\n    // Validate message types.\n    if (primaryType !== 'EIP712Domain')\n        validateData(types[primaryType], message);\n}\nexport function getTypesForEIP712Domain({ domain, }) {\n    return [\n        typeof domain?.name === 'string' && { name: 'name', type: 'string' },\n        domain?.version && { name: 'version', type: 'string' },\n        typeof domain?.chainId === 'number' && {\n            name: 'chainId',\n            type: 'uint256',\n        },\n        domain?.verifyingContract && {\n            name: 'verifyingContract',\n            type: 'address',\n        },\n        domain?.salt && { name: 'salt', type: 'bytes32' },\n    ].filter(Boolean);\n}\nexport function domainSeparator({ domain }) {\n    return hashDomain({\n        domain,\n        types: {\n            EIP712Domain: getTypesForEIP712Domain({ domain }),\n        },\n    });\n}\n//# sourceMappingURL=typedData.js.map","export const presignMessagePrefix = '\\x19Ethereum Signed Message:\\n';\n//# sourceMappingURL=strings.js.map","import { presignMessagePrefix } from '../../constants/strings.js';\nimport { concat } from '../data/concat.js';\nimport { size } from '../data/size.js';\nimport { bytesToHex, stringToHex, } from '../encoding/toHex.js';\nexport function toPrefixedMessage(message_) {\n    const message = (() => {\n        if (typeof message_ === 'string')\n            return stringToHex(message_);\n        if (typeof message_.raw === 'string')\n            return message_.raw;\n        return bytesToHex(message_.raw);\n    })();\n    const prefix = stringToHex(`${presignMessagePrefix}${size(message)}`);\n    return concat([prefix, message]);\n}\n//# sourceMappingURL=toPrefixedMessage.js.map","import { keccak256 } from '../hash/keccak256.js';\nimport { toPrefixedMessage } from './toPrefixedMessage.js';\nexport function hashMessage(message, to_) {\n    return keccak256(toPrefixedMessage(message), to_);\n}\n//# sourceMappingURL=hashMessage.js.map","const MAGIC_VALUE = '0x1626ba7e';\nconst MAGIC_VALUE_BYTES = '0x20c13b0b';\nexport { MAGIC_VALUE, MAGIC_VALUE_BYTES };\n//# sourceMappingURL=signatures.js.map","export const PERMISSIONS_REQUEST_REJECTED = 4001;\nexport class PermissionsError extends Error {\n    constructor(message, code, data) {\n        super(message);\n        this.code = code;\n        this.data = data;\n        // Should adjust prototype manually because how TS handles the type extension compilation\n        // https://github.com/Microsoft/TypeScript/wiki/Breaking-Changes#extending-built-ins-like-error-array-and-map-may-no-longer-work\n        Object.setPrototypeOf(this, PermissionsError.prototype);\n    }\n}\n//# sourceMappingURL=permissions.js.map","import { Methods, RestrictedMethods } from '../communication/methods.js';\nimport { PermissionsError, PERMISSIONS_REQUEST_REJECTED } from '../types/permissions.js';\nclass Wallet {\n    constructor(communicator) {\n        this.communicator = communicator;\n    }\n    async getPermissions() {\n        const response = await this.communicator.send(Methods.wallet_getPermissions, undefined);\n        return response.data;\n    }\n    async requestPermissions(permissions) {\n        if (!this.isPermissionRequestValid(permissions)) {\n            throw new PermissionsError('Permissions request is invalid', PERMISSIONS_REQUEST_REJECTED);\n        }\n        try {\n            const response = await this.communicator.send(Methods.wallet_requestPermissions, permissions);\n            return response.data;\n        }\n        catch {\n            throw new PermissionsError('Permissions rejected', PERMISSIONS_REQUEST_REJECTED);\n        }\n    }\n    isPermissionRequestValid(permissions) {\n        return permissions.every((pr) => {\n            if (typeof pr === 'object') {\n                return Object.keys(pr).every((method) => {\n                    if (Object.values(RestrictedMethods).includes(method)) {\n                        return true;\n                    }\n                    return false;\n                });\n            }\n            return false;\n        });\n    }\n}\nexport { Wallet };\n//# sourceMappingURL=index.js.map","import { Wallet } from '../wallet/index.js';\nimport { PermissionsError, PERMISSIONS_REQUEST_REJECTED } from '../types/permissions.js';\nconst hasPermission = (required, permissions) => permissions.some((permission) => permission.parentCapability === required);\nconst requirePermission = () => (_, propertyKey, descriptor) => {\n    const originalMethod = descriptor.value;\n    descriptor.value = async function () {\n        // @ts-expect-error accessing private property from decorator. 'this' context is the class instance\n        const wallet = new Wallet(this.communicator);\n        let currentPermissions = await wallet.getPermissions();\n        if (!hasPermission(propertyKey, currentPermissions)) {\n            currentPermissions = await wallet.requestPermissions([{ [propertyKey]: {} }]);\n        }\n        if (!hasPermission(propertyKey, currentPermissions)) {\n            throw new PermissionsError('Permissions rejected', PERMISSIONS_REQUEST_REJECTED);\n        }\n        return originalMethod.apply(this);\n    };\n    return descriptor;\n};\nexport default requirePermission;\n//# sourceMappingURL=requirePermissions.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { encodeFunctionData, hashMessage, hashTypedData } from 'viem';\nimport { MAGIC_VALUE_BYTES, MAGIC_VALUE } from './signatures.js';\nimport { Methods } from '../communication/methods.js';\nimport { RPC_CALLS } from '../eth/constants.js';\nimport { isObjectEIP712TypedData, } from '../types/index.js';\nimport requirePermission from '../decorators/requirePermissions.js';\nclass Safe {\n    constructor(communicator) {\n        this.communicator = communicator;\n    }\n    async getChainInfo() {\n        const response = await this.communicator.send(Methods.getChainInfo, undefined);\n        return response.data;\n    }\n    async getInfo() {\n        const response = await this.communicator.send(Methods.getSafeInfo, undefined);\n        return response.data;\n    }\n    // There is a possibility that this method will change because we may add pagination to the endpoint\n    async experimental_getBalances({ currency = 'usd' } = {}) {\n        const response = await this.communicator.send(Methods.getSafeBalances, {\n            currency,\n        });\n        return response.data;\n    }\n    async check1271Signature(messageHash, signature = '0x') {\n        const safeInfo = await this.getInfo();\n        const encodedIsValidSignatureCall = encodeFunctionData({\n            abi: [\n                {\n                    constant: false,\n                    inputs: [\n                        {\n                            name: '_dataHash',\n                            type: 'bytes32',\n                        },\n                        {\n                            name: '_signature',\n                            type: 'bytes',\n                        },\n                    ],\n                    name: 'isValidSignature',\n                    outputs: [\n                        {\n                            name: '',\n                            type: 'bytes4',\n                        },\n                    ],\n                    payable: false,\n                    stateMutability: 'nonpayable',\n                    type: 'function',\n                },\n            ],\n            functionName: 'isValidSignature',\n            args: [messageHash, signature],\n        });\n        const payload = {\n            call: RPC_CALLS.eth_call,\n            params: [\n                {\n                    to: safeInfo.safeAddress,\n                    data: encodedIsValidSignatureCall,\n                },\n                'latest',\n            ],\n        };\n        try {\n            const response = await this.communicator.send(Methods.rpcCall, payload);\n            return response.data.slice(0, 10).toLowerCase() === MAGIC_VALUE;\n        }\n        catch (err) {\n            return false;\n        }\n    }\n    async check1271SignatureBytes(messageHash, signature = '0x') {\n        const safeInfo = await this.getInfo();\n        const encodedIsValidSignatureCall = encodeFunctionData({\n            abi: [\n                {\n                    constant: false,\n                    inputs: [\n                        {\n                            name: '_data',\n                            type: 'bytes',\n                        },\n                        {\n                            name: '_signature',\n                            type: 'bytes',\n                        },\n                    ],\n                    name: 'isValidSignature',\n                    outputs: [\n                        {\n                            name: '',\n                            type: 'bytes4',\n                        },\n                    ],\n                    payable: false,\n                    stateMutability: 'nonpayable',\n                    type: 'function',\n                },\n            ],\n            functionName: 'isValidSignature',\n            args: [messageHash, signature],\n        });\n        const payload = {\n            call: RPC_CALLS.eth_call,\n            params: [\n                {\n                    to: safeInfo.safeAddress,\n                    data: encodedIsValidSignatureCall,\n                },\n                'latest',\n            ],\n        };\n        try {\n            const response = await this.communicator.send(Methods.rpcCall, payload);\n            return response.data.slice(0, 10).toLowerCase() === MAGIC_VALUE_BYTES;\n        }\n        catch (err) {\n            return false;\n        }\n    }\n    calculateMessageHash(message) {\n        return hashMessage(message);\n    }\n    calculateTypedMessageHash(typedMessage) {\n        const chainId = typeof typedMessage.domain.chainId === 'object'\n            ? typedMessage.domain.chainId.toNumber()\n            : Number(typedMessage.domain.chainId);\n        let primaryType = typedMessage.primaryType;\n        if (!primaryType) {\n            const fields = Object.values(typedMessage.types);\n            // We try to infer primaryType (simplified ether's version)\n            const primaryTypes = Object.keys(typedMessage.types).filter((typeName) => fields.every((dataTypes) => dataTypes.every(({ type }) => type.replace('[', '').replace(']', '') !== typeName)));\n            if (primaryTypes.length === 0 || primaryTypes.length > 1)\n                throw new Error('Please specify primaryType');\n            primaryType = primaryTypes[0];\n        }\n        return hashTypedData({\n            message: typedMessage.message,\n            domain: {\n                ...typedMessage.domain,\n                chainId,\n                verifyingContract: typedMessage.domain.verifyingContract,\n                salt: typedMessage.domain.salt,\n            },\n            types: typedMessage.types,\n            primaryType,\n        });\n    }\n    async getOffChainSignature(messageHash) {\n        const response = await this.communicator.send(Methods.getOffChainSignature, messageHash);\n        return response.data;\n    }\n    async isMessageSigned(message, signature = '0x') {\n        let check;\n        if (typeof message === 'string') {\n            check = async () => {\n                const messageHash = this.calculateMessageHash(message);\n                const messageHashSigned = await this.isMessageHashSigned(messageHash, signature);\n                return messageHashSigned;\n            };\n        }\n        if (isObjectEIP712TypedData(message)) {\n            check = async () => {\n                const messageHash = this.calculateTypedMessageHash(message);\n                const messageHashSigned = await this.isMessageHashSigned(messageHash, signature);\n                return messageHashSigned;\n            };\n        }\n        if (check) {\n            const isValid = await check();\n            return isValid;\n        }\n        throw new Error('Invalid message type');\n    }\n    async isMessageHashSigned(messageHash, signature = '0x') {\n        const checks = [this.check1271Signature.bind(this), this.check1271SignatureBytes.bind(this)];\n        for (const check of checks) {\n            const isValid = await check(messageHash, signature);\n            if (isValid) {\n                return true;\n            }\n        }\n        return false;\n    }\n    async getEnvironmentInfo() {\n        const response = await this.communicator.send(Methods.getEnvironmentInfo, undefined);\n        return response.data;\n    }\n    async requestAddressBook() {\n        const response = await this.communicator.send(Methods.requestAddressBook, undefined);\n        return response.data;\n    }\n}\n__decorate([\n    requirePermission()\n], Safe.prototype, \"requestAddressBook\", null);\nexport { Safe };\n//# sourceMappingURL=index.js.map","import InterfaceCommunicator from './communication/index.js';\nimport { TXs } from './txs/index.js';\nimport { Eth } from './eth/index.js';\nimport { Safe } from './safe/index.js';\nimport { Wallet } from './wallet/index.js';\nclass SafeAppsSDK {\n    constructor(opts = {}) {\n        const { allowedDomains = null, debug = false } = opts;\n        this.communicator = new InterfaceCommunicator(allowedDomains, debug);\n        this.eth = new Eth(this.communicator);\n        this.txs = new TXs(this.communicator);\n        this.safe = new Safe(this.communicator);\n        this.wallet = new Wallet(this.communicator);\n    }\n}\nexport default SafeAppsSDK;\n//# sourceMappingURL=sdk.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getLowerCase = void 0;\nfunction getLowerCase(value) {\n    if (value) {\n        return value.toLowerCase();\n    }\n    return value;\n}\nexports.getLowerCase = getLowerCase;\n//# sourceMappingURL=utils.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SafeAppProvider = void 0;\nconst events_1 = require(\"events\");\nconst utils_1 = require(\"./utils\");\n// The API is based on Ethereum JavaScript API Provider Standard. Link: https://eips.ethereum.org/EIPS/eip-1193\nclass SafeAppProvider extends events_1.EventEmitter {\n    constructor(safe, sdk) {\n        super();\n        this.submittedTxs = new Map();\n        this.safe = safe;\n        this.sdk = sdk;\n    }\n    async connect() {\n        this.emit('connect', { chainId: this.chainId });\n        return;\n    }\n    async disconnect() {\n        return;\n    }\n    get chainId() {\n        return this.safe.chainId;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    async request(request) {\n        const { method, params = [] } = request;\n        switch (method) {\n            case 'eth_accounts':\n                return [this.safe.safeAddress];\n            case 'net_version':\n            case 'eth_chainId':\n                return `0x${this.chainId.toString(16)}`;\n            case 'personal_sign': {\n                const [message, address] = params;\n                if (this.safe.safeAddress.toLowerCase() !== address.toLowerCase()) {\n                    throw new Error('The address or message hash is invalid');\n                }\n                const response = await this.sdk.txs.signMessage(message);\n                const signature = 'signature' in response ? response.signature : undefined;\n                return signature || '0x';\n            }\n            case 'eth_sign': {\n                const [address, messageHash] = params;\n                if (this.safe.safeAddress.toLowerCase() !== address.toLowerCase() || !messageHash.startsWith('0x')) {\n                    throw new Error('The address or message hash is invalid');\n                }\n                const response = await this.sdk.txs.signMessage(messageHash);\n                const signature = 'signature' in response ? response.signature : undefined;\n                return signature || '0x';\n            }\n            case 'eth_signTypedData':\n            case 'eth_signTypedData_v4': {\n                const [address, typedData] = params;\n                const parsedTypedData = typeof typedData === 'string' ? JSON.parse(typedData) : typedData;\n                if (this.safe.safeAddress.toLowerCase() !== address.toLowerCase()) {\n                    throw new Error('The address is invalid');\n                }\n                const response = await this.sdk.txs.signTypedMessage(parsedTypedData);\n                const signature = 'signature' in response ? response.signature : undefined;\n                return signature || '0x';\n            }\n            case 'eth_sendTransaction':\n                // `value` or `data` can be explicitly set as `undefined` for example in Viem. The spread will overwrite the fallback value.\n                const tx = {\n                    ...params[0],\n                    value: params[0].value || '0',\n                    data: params[0].data || '0x',\n                };\n                // Some ethereum libraries might pass the gas as a hex-encoded string\n                // We need to convert it to a number because the SDK expects a number and our backend only supports\n                // Decimal numbers\n                if (typeof tx.gas === 'string' && tx.gas.startsWith('0x')) {\n                    tx.gas = parseInt(tx.gas, 16);\n                }\n                const resp = await this.sdk.txs.send({\n                    txs: [tx],\n                    params: { safeTxGas: tx.gas },\n                });\n                // Store fake transaction\n                this.submittedTxs.set(resp.safeTxHash, {\n                    from: this.safe.safeAddress,\n                    hash: resp.safeTxHash,\n                    gas: 0,\n                    gasPrice: '0x00',\n                    nonce: 0,\n                    input: tx.data,\n                    value: tx.value,\n                    to: tx.to,\n                    blockHash: null,\n                    blockNumber: null,\n                    transactionIndex: null,\n                });\n                return resp.safeTxHash;\n            case 'eth_blockNumber':\n                const block = await this.sdk.eth.getBlockByNumber(['latest']);\n                return block.number;\n            case 'eth_getBalance':\n                return this.sdk.eth.getBalance([(0, utils_1.getLowerCase)(params[0]), params[1]]);\n            case 'eth_getCode':\n                return this.sdk.eth.getCode([(0, utils_1.getLowerCase)(params[0]), params[1]]);\n            case 'eth_getTransactionCount':\n                return this.sdk.eth.getTransactionCount([(0, utils_1.getLowerCase)(params[0]), params[1]]);\n            case 'eth_getStorageAt':\n                return this.sdk.eth.getStorageAt([(0, utils_1.getLowerCase)(params[0]), params[1], params[2]]);\n            case 'eth_getBlockByNumber':\n                return this.sdk.eth.getBlockByNumber([params[0], params[1]]);\n            case 'eth_getBlockByHash':\n                return this.sdk.eth.getBlockByHash([params[0], params[1]]);\n            case 'eth_getTransactionByHash':\n                let txHash = params[0];\n                try {\n                    const resp = await this.sdk.txs.getBySafeTxHash(txHash);\n                    txHash = resp.txHash || txHash;\n                }\n                catch (e) { }\n                // Use fake transaction if we don't have a real tx hash\n                if (this.submittedTxs.has(txHash)) {\n                    return this.submittedTxs.get(txHash);\n                }\n                return this.sdk.eth.getTransactionByHash([txHash]).then((tx) => {\n                    // We set the tx hash to the one requested, as some provider assert this\n                    if (tx) {\n                        tx.hash = params[0];\n                    }\n                    return tx;\n                });\n            case 'eth_getTransactionReceipt': {\n                let txHash = params[0];\n                try {\n                    const resp = await this.sdk.txs.getBySafeTxHash(txHash);\n                    txHash = resp.txHash || txHash;\n                }\n                catch (e) { }\n                return this.sdk.eth.getTransactionReceipt([txHash]).then((tx) => {\n                    // We set the tx hash to the one requested, as some provider assert this\n                    if (tx) {\n                        tx.transactionHash = params[0];\n                    }\n                    return tx;\n                });\n            }\n            case 'eth_estimateGas': {\n                return this.sdk.eth.getEstimateGas(params[0]);\n            }\n            case 'eth_call': {\n                return this.sdk.eth.call([params[0], params[1]]);\n            }\n            case 'eth_getLogs':\n                return this.sdk.eth.getPastLogs([params[0]]);\n            case 'eth_gasPrice':\n                return this.sdk.eth.getGasPrice();\n            case 'wallet_getPermissions':\n                return this.sdk.wallet.getPermissions();\n            case 'wallet_requestPermissions':\n                return this.sdk.wallet.requestPermissions(params[0]);\n            case 'safe_setSettings':\n                return this.sdk.eth.setSafeSettings([params[0]]);\n            default:\n                throw Error(`\"${request.method}\" not implemented`);\n        }\n    }\n    // this method is needed for ethers v4\n    // https://github.com/ethers-io/ethers.js/blob/427e16826eb15d52d25c4f01027f8db22b74b76c/src.ts/providers/web3-provider.ts#L41-L55\n    send(request, callback) {\n        if (!request)\n            callback('Undefined request');\n        this.request(request)\n            .then((result) => callback(null, { jsonrpc: '2.0', id: request.id, result }))\n            .catch((error) => callback(error, null));\n    }\n}\nexports.SafeAppProvider = SafeAppProvider;\n//# sourceMappingURL=provider.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SafeAppProvider = void 0;\nvar provider_1 = require(\"./provider\");\nObject.defineProperty(exports, \"SafeAppProvider\", { enumerable: true, get: function () { return provider_1.SafeAppProvider; } });\n//# sourceMappingURL=index.js.map","import { SafeAppProvider } from \"@safe-global/safe-apps-provider\";\nimport SafeSDK, { TransactionStatus } from \"@safe-global/safe-apps-sdk\";\nimport {\n  type ExtraProps,\n  configMeta,\n} from \"@sk-widget/providers/safe/safe-connector-meta\";\nimport { isIframe } from \"@sk-widget/utils\";\nimport type { Chain, WalletList } from \"@stakekit/rainbowkit\";\nimport {\n  type Connector,\n  ProviderNotFoundError,\n  createConnector,\n} from \"@wagmi/core\";\nimport { EitherAsync, Maybe } from \"purify-ts\";\nimport { BehaviorSubject } from \"rxjs\";\nimport { getAddress, withTimeout } from \"viem\";\n\nfunction safe(\n  parameters: {\n    shimDisconnect?: boolean;\n  } = {}\n) {\n  const { shimDisconnect = false } = parameters;\n\n  type Provider = SafeAppProvider | undefined;\n  type StorageItem = { \"safe.disconnected\": true };\n\n  let provider_: Provider | undefined;\n\n  let disconnect: Connector[\"onDisconnect\"] | undefined;\n\n  return createConnector<Provider, ExtraProps, StorageItem>((config) => {\n    const $filteredChains = new BehaviorSubject<Chain[]>([]);\n    const sdk = new SafeSDK();\n\n    return {\n      id: configMeta.id,\n      name: configMeta.name,\n      type: configMeta.type,\n      async connect() {\n        const provider = await this.getProvider();\n        if (!provider) throw new ProviderNotFoundError();\n\n        const accounts = await this.getAccounts();\n        const chainId = await this.getChainId();\n        $filteredChains.next(\n          Maybe.fromNullable(config.chains.find((c) => c.id === chainId))\n            .map((c) => [c])\n            .orDefault([])\n        );\n\n        if (!disconnect) {\n          disconnect = this.onDisconnect.bind(this);\n          provider.on(\"disconnect\", disconnect);\n        }\n\n        // Remove disconnected shim if it exists\n        if (shimDisconnect)\n          await config.storage?.removeItem(\"safe.disconnected\");\n\n        return { accounts, chainId };\n      },\n      async disconnect() {\n        const provider = await this.getProvider();\n        if (!provider) throw new ProviderNotFoundError();\n\n        if (disconnect) {\n          provider.removeListener(\"disconnect\", disconnect);\n          disconnect = undefined;\n        }\n\n        // Add shim signalling connector is disconnected\n        if (shimDisconnect)\n          await config.storage?.setItem(\"safe.disconnected\", true);\n      },\n      async getAccounts() {\n        const provider = await this.getProvider();\n        if (!provider) throw new ProviderNotFoundError();\n        return (await provider.request({ method: \"eth_accounts\" })).map(\n          getAddress\n        );\n      },\n      async getProvider() {\n        // Only allowed in iframe context\n        if (!isIframe()) return;\n\n        if (!provider_) {\n          // `getInfo` hangs when not used in Safe App iFrame\n          // https://github.com/safe-global/safe-apps-sdk/issues/263#issuecomment-1029835840\n          const safe = await withTimeout(() => sdk.safe.getInfo(), {\n            timeout: 10,\n          });\n          if (!safe) throw new Error(\"Could not load Safe information\");\n          provider_ = new SafeAppProvider(safe, sdk);\n        }\n        return provider_;\n      },\n      async getChainId() {\n        const provider = await this.getProvider();\n        if (!provider) throw new ProviderNotFoundError();\n        return Number(provider.chainId);\n      },\n      async isAuthorized() {\n        try {\n          const isDisconnected =\n            shimDisconnect &&\n            // If shim exists in storage, connector is disconnected\n            (await config.storage?.getItem(\"safe.disconnected\"));\n          if (isDisconnected) return false;\n\n          const accounts = await this.getAccounts();\n          return !!accounts.length;\n        } catch {\n          return false;\n        }\n      },\n      onAccountsChanged() {\n        // Not relevant for Safe because changing account requires app reload.\n      },\n      onChainChanged() {\n        // Not relevant for Safe because Safe smart contract wallets only exist on single chain.\n      },\n      onDisconnect() {\n        config.emitter.emit(\"disconnect\");\n      },\n      $filteredChains,\n      getTxStatus(txHash) {\n        return EitherAsync(() => sdk.txs.getBySafeTxHash(txHash)).mapLeft(\n          () => new Error(\"Could not get transaction status\")\n        );\n      },\n      txStatus: TransactionStatus,\n      sendTransactions(args) {\n        return EitherAsync(() => sdk.txs.send(args)).mapLeft(\n          () => new Error(\"Could not send transactions\")\n        );\n      },\n    };\n  });\n}\n\nexport const safeConnector = (): WalletList[number] => ({\n  groupName: \"Ledger Live\",\n  wallets: [\n    () => ({\n      id: configMeta.id,\n      name: configMeta.name,\n      iconUrl: \"\",\n      iconBackground: \"#fff\",\n      createConnector: () => safe({ shimDisconnect: true }),\n    }),\n  ],\n});\n"],"names":["getSDKVersion","dec2hex","dec","generateId","len","arr","generateRequestId","MessageFormatter","method","params","id","data","version","error","Methods","RestrictedMethods","PostMessageCommunicator","allowedOrigins","debugMode","origin","source","emptyOrMalformed","sentFromParentEl","majorVersionNumber","allowedSDKVersion","validOrigin","regExp","msg","payload","cb","request","resolve","reject","response","isObjectEIP712TypedData","obj","global","this","__self__","F","self","exports","support","isDataView","viewClasses","isArrayBufferView","normalizeName","name","normalizeValue","value","iteratorFor","items","iterator","Headers","headers","header","oldValue","callback","thisArg","consumed","body","fileReaderReady","reader","readBlobAsArrayBuffer","blob","promise","readBlobAsText","readArrayBufferAsText","buf","view","chars","i","bufferClone","Body","rejected","decode","methods","normalizeMethod","upcased","Request","input","options","form","bytes","split","parseHeaders","rawHeaders","preProcessedHeaders","line","parts","key","Response","bodyInit","redirectStatuses","url","status","message","fetch","init","xhr","abortXhr","ctx","module","__awaiter","_arguments","P","generator","adopt","fulfilled","step","e","result","__importDefault","mod","utils","cross_fetch_1","require$$0","isErrorResponse","replaceParam","str","insertParams","template","stringifyQuery","query","searchParams","searchString","fetchData","resp","json","errTxt","endpoint","utils_1","makeUrl","baseUrl","path","pathParams","pathname","search","postEndpoint","getEndpoint","rawUrl","config","ImplementationVersionState","SafeAppAccessPolicyTypes","SafeAppFeatures","SafeAppSocialPlatforms","Operation","TransactionStatus","TransferDirection","TransactionTokenType","SettingsInfoType","TransactionInfoType","ConflictType","TransactionListItemType","DetailedExecutionInfoType","LabelValue","RPC_AUTHENTICATION","GAS_PRICE_TYPE","FEATURES","TokenType","masterCopies","decodedData","SafeMessageListItemType","SafeMessageStatus","__createBinding","m","k","k2","desc","__exportStar","p","endpoint_1","config_1","require$$1","require$$2","require$$3","require$$4","require$$5","require$$6","require$$7","require$$8","require$$9","setBaseUrl","getSafeInfo","chainId","address","getIncomingTransfers","pageUrl","getModuleTransactions","getMultisigTransactions","getBalances","currency","getFiatCurrencies","getOwnedSafes","getCollectibles","getCollectiblesPage","getTransactionHistory","getTransactionQueue","trusted","getTransactionDetails","transactionId","postSafeGasEstimation","proposeTransaction","getChainsConfig","getChainConfig","getSafeApps","getMasterCopies","getDecodedData","encodedData","getSafeMessages","getSafeMessage","messageHash","proposeSafeMessage","confirmSafeMessage","TXs","communicator","safeTxHash","messagePayload","typedData","txs","RPC_CALLS","inputFormatters","arg","Eth","transaction","args","call","formatters","formatter","execTyped","regex","string","match","tupleRegex","formatAbiParameter","abiParameter","type","length","component","formatAbiParameters","abiParameters","formatAbiItem","abiItem","includeName","InvalidDefinitionTypeError","formatAbiParams","param","formatAbiParam","isHex","strict","size","errorConfig","docsBaseUrl","docsPath","docsSlug","BaseError","shortMessage","details","_a","docsUrl","fn","walk","err","AbiEncodingArrayLengthMismatchError","expectedLength","givenLength","AbiEncodingBytesSizeMismatchError","expectedSize","AbiEncodingLengthMismatchError","AbiFunctionNotFoundError","functionName","AbiItemAmbiguityError","x","y","BytesSizeMismatchError","givenSize","InvalidAbiEncodingTypeError","InvalidArrayError","SliceOffsetOutOfBoundsError","offset","position","SizeExceedsPaddingSizeError","targetSize","pad","hexOrBytes","dir","padHex","padBytes","hex_","hex","paddedBytes","padEnd","IntegerOutOfRangeError","max","min","signed","SizeOverflowError","maxSize","assertSize","size_","hexes","_v","toHex","opts","numberToHex","stringToHex","boolToHex","bytesToHex","value_","maxValue","minValue","suffix","encoder","toBytes","numberToBytes","boolToBytes","hexToBytes","stringToBytes","charCodeMap","charCodeToBase16","char","hexString","index","j","nibbleLeft","nibbleRight","number","n","isBytes","a","b","lengths","exists","instance","checkFinished","output","out","U32_MASK64","_32n","fromBig","le","lst","Ah","Al","h","l","rotlSH","s","rotlSL","rotlBH","rotlBL","u32","isLE","byteSwap","word","byteSwap32","utf8ToBytes","abytes","Hash","wrapConstructor","hashCons","hashC","tmp","SHA3_PI","SHA3_ROTL","_SHA3_IOTA","_0n","_1n","_2n","_7n","_256n","_0x71n","round","R","t","SHA3_IOTA_H","SHA3_IOTA_L","rotlH","rotlL","keccakP","rounds","B","idx1","idx0","B0","B1","Th","Tl","curH","curL","shift","PI","Keccak","blockLen","outputLen","enableXOF","state","pos","take","bufferOut","to","gen","keccak_256","keccak256","to_","hash","hashSignature","sig","normalizeSignature","signature","active","current","level","valid","toSignature","def","def_","toSignatureHash","toEventSelector","InvalidAddressError","LruMap","checksumAddressCache","checksumAddress","address_","hexAddress","addressRegex","isAddressCache","isAddress","cacheKey","concat","values","concatHex","concatBytes","acc","slice","start","end","sliceHex","sliceBytes","assertStartOffset","assertEndOffset","encodeAbiParameters","preparedParams","prepareParams","encodeParams","prepareParam","arrayComponents","getArrayComponents","encodeArray","encodeTuple","encodeAddress","encodeBool","encodeNumber","encodeBytes","encodeString","staticSize","dynamic","encoded","staticParams","dynamicParams","dynamicSize","dynamicChild","preparedParam","paramSize","bytesSize","hexValue","partsLength","param_","matches","toFunctionSelector","getAbiItem","parameters","abi","isSelector","abiItems","matchedAbiItem","isArgOfType","ambiguousTypes","getAmbiguousTypes","argType","abiParameterType","sourceParameters","targetParameters","parameterIndex","sourceParameter","targetParameter","types","prepareEncodeFunctionData","item","encodeFunctionData","bytesRegex","integerRegex","hashTypedData","domain","primaryType","getTypesForEIP712Domain","validateTypedData","hashDomain","hashStruct","encodeData","encodedTypes","encodedValues","hashType","field","encodeField","encodedHashType","encodeType","unsortedDeps","findTypeDependencies","deps","primaryType_","results","parsedType","typeValuePairs","v","validateData","struct","integerMatch","_type","base","bytesMatch","presignMessagePrefix","toPrefixedMessage","message_","prefix","hashMessage","MAGIC_VALUE","MAGIC_VALUE_BYTES","PERMISSIONS_REQUEST_REJECTED","PermissionsError","code","Wallet","permissions","pr","hasPermission","required","permission","requirePermission","_","propertyKey","descriptor","originalMethod","wallet","currentPermissions","__decorate","decorators","target","c","r","d","Safe","safeInfo","encodedIsValidSignatureCall","typedMessage","fields","primaryTypes","typeName","dataTypes","check","checks","SafeAppsSDK","allowedDomains","debug","InterfaceCommunicator","getLowerCase","provider","events_1","SafeAppProvider","safe","sdk","parsedTypedData","tx","txHash","provider_1","shimDisconnect","provider_","disconnect","createConnector","$filteredChains","BehaviorSubject","SafeSDK","configMeta","ProviderNotFoundError","accounts","Maybe","getAddress","isIframe","withTimeout","EitherAsync","safeConnector"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73]}